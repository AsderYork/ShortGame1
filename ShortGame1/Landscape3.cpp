#include "stdafx.h"
#include "Landscape3.h"

#include "EngineController.h"
#include "SDL2_Service.h"
#include "Ogre_Service.h"
#include "CEGUI_Service.h"
#include "DebugLayout.h"
#include "DebugMapGraphicsService.h"
#include "ConsoleLayout.h"
#include "MapService.h"
#include "ScreenController.h"
#include "NetworkController.h"
#include "GameSimService.h"

#include "LoginScreen.h"
#include "MainGameScreen.h"
#include "DebugOverlayScreen.h"

#include <LandscapeMeshGenerator.h>
#include "LandscapeVisualization.h"

#include <Ogre/Hlms/Unlit/OgreHlmsUnlit.h>
#include <OGRE\OgreMesh2.h>
#include <OGRE\OgreMeshManager2.h>
#include <OGRE\OgreSubMesh2.h>
#include <OGRE\OgreItem.h>

#include <compare>
#include <set>
#include <array>
#include <optional>

#include <queue>
#include <chrono>
#include <numeric>

#include <PerlinNoise.h>
#include <Hasher.h>

#define CHUNK_SIZE 16
#define CHUNK_LOD 8


//================================================================================
//
// The Transvoxel Algorithm look-up tables
//
// Copyright 2009 by Eric Lengyel
//
// The following data originates from Eric Lengyel's Transvoxel Algorithm.
// http://transvoxel.org/
//
// The data in this file may be freely used in implementations of the Transvoxel
// Algorithm. If you do use this data, or any transformation of it, in your own
// projects, commercial or otherwise, please give credit by indicating in your
// source code that the data is part of the author's implementation of the
// Transvoxel Algorithm and that it came from the web address given above.
// (Simply copying and pasting the two lines of the previous paragraph would be
// perfect.) If you distribute a commercial product with source code included,
// then the credit in the source code is required.
//
// If you distribute any kind of product that uses this data, a credit visible to
// the end-user would be appreciated, but it is not required. However, you may
// not claim that the entire implementation of the Transvoxel Algorithm is your
// own if you use the data in this file or any transformation of it.
//
// The format of the data in this file is described in the dissertation "Voxel-
// Based Terrain for Real-Time Virtual Simulations", available at the web page
// given above. References to sections and figures below pertain to that paper.
//
// The contents of this file are protected by copyright and may not be publicly
// reproduced without permission.
//
//================================================================================


// The RegularCellData structure holds information about the triangulation
// used for a single equivalence class in the modified Marching Cubes algorithm,
// described in Section 3.2.

struct RegularCellData
{
	unsigned char	geometryCounts;		// High nibble is vertex count, low nibble is triangle count.
	unsigned char	vertexIndex[15];	// Groups of 3 indexes giving the triangulation.

	long GetVertexCount(void) const
	{
		return (geometryCounts >> 4);
	}

	long GetTriangleCount(void) const
	{
		return (geometryCounts & 0x0F);
	}
};


// The TransitionCellData structure holds information about the triangulation
// used for a single equivalence class in the Transvoxel Algorithm transition cell,
// described in Section 4.3.

struct TransitionCellData
{
	long			geometryCounts;		// High nibble is vertex count, low nibble is triangle count.
	unsigned char	vertexIndex[36];	// Groups of 3 indexes giving the triangulation.

	long GetVertexCount(void) const
	{
		return (geometryCounts >> 4);
	}

	long GetTriangleCount(void) const
	{
		return (geometryCounts & 0x0F);
	}
};


// The regularCellClass table maps an 8-bit regular Marching Cubes case index to
// an equivalence class index. Even though there are 18 equivalence classes in our
// modified Marching Cubes algorithm, a couple of them use the same exact triangulations,
// just with different vertex locations. We combined those classes for this table so
// that the class index ranges from 0 to 15.

const unsigned char regularCellClass[256] =
{
	0x00, 0x01, 0x01, 0x03, 0x01, 0x03, 0x02, 0x04, 0x01, 0x02, 0x03, 0x04, 0x03, 0x04, 0x04, 0x03,
	0x01, 0x03, 0x02, 0x04, 0x02, 0x04, 0x06, 0x0C, 0x02, 0x05, 0x05, 0x0B, 0x05, 0x0A, 0x07, 0x04,
	0x01, 0x02, 0x03, 0x04, 0x02, 0x05, 0x05, 0x0A, 0x02, 0x06, 0x04, 0x0C, 0x05, 0x07, 0x0B, 0x04,
	0x03, 0x04, 0x04, 0x03, 0x05, 0x0B, 0x07, 0x04, 0x05, 0x07, 0x0A, 0x04, 0x08, 0x0E, 0x0E, 0x03,
	0x01, 0x02, 0x02, 0x05, 0x03, 0x04, 0x05, 0x0B, 0x02, 0x06, 0x05, 0x07, 0x04, 0x0C, 0x0A, 0x04,
	0x03, 0x04, 0x05, 0x0A, 0x04, 0x03, 0x07, 0x04, 0x05, 0x07, 0x08, 0x0E, 0x0B, 0x04, 0x0E, 0x03,
	0x02, 0x06, 0x05, 0x07, 0x05, 0x07, 0x08, 0x0E, 0x06, 0x09, 0x07, 0x0F, 0x07, 0x0F, 0x0E, 0x0D,
	0x04, 0x0C, 0x0B, 0x04, 0x0A, 0x04, 0x0E, 0x03, 0x07, 0x0F, 0x0E, 0x0D, 0x0E, 0x0D, 0x02, 0x01,
	0x01, 0x02, 0x02, 0x05, 0x02, 0x05, 0x06, 0x07, 0x03, 0x05, 0x04, 0x0A, 0x04, 0x0B, 0x0C, 0x04,
	0x02, 0x05, 0x06, 0x07, 0x06, 0x07, 0x09, 0x0F, 0x05, 0x08, 0x07, 0x0E, 0x07, 0x0E, 0x0F, 0x0D,
	0x03, 0x05, 0x04, 0x0B, 0x05, 0x08, 0x07, 0x0E, 0x04, 0x07, 0x03, 0x04, 0x0A, 0x0E, 0x04, 0x03,
	0x04, 0x0A, 0x0C, 0x04, 0x07, 0x0E, 0x0F, 0x0D, 0x0B, 0x0E, 0x04, 0x03, 0x0E, 0x02, 0x0D, 0x01,
	0x03, 0x05, 0x05, 0x08, 0x04, 0x0A, 0x07, 0x0E, 0x04, 0x07, 0x0B, 0x0E, 0x03, 0x04, 0x04, 0x03,
	0x04, 0x0B, 0x07, 0x0E, 0x0C, 0x04, 0x0F, 0x0D, 0x0A, 0x0E, 0x0E, 0x02, 0x04, 0x03, 0x0D, 0x01,
	0x04, 0x07, 0x0A, 0x0E, 0x0B, 0x0E, 0x0E, 0x02, 0x0C, 0x0F, 0x04, 0x0D, 0x04, 0x0D, 0x03, 0x01,
	0x03, 0x04, 0x04, 0x03, 0x04, 0x03, 0x0D, 0x01, 0x04, 0x0D, 0x03, 0x01, 0x03, 0x01, 0x01, 0x00
};


// The regularCellData table holds the triangulation data for all 16 distinct classes to
// which a case can be mapped by the regularCellClass table.

const RegularCellData regularCellData[16] =
{
	{0x00, {}},
	{0x31, {0, 1, 2}},
	{0x62, {0, 1, 2, 3, 4, 5}},
	{0x42, {0, 1, 2, 0, 2, 3}},
	{0x53, {0, 1, 4, 1, 3, 4, 1, 2, 3}},
	{0x73, {0, 1, 2, 0, 2, 3, 4, 5, 6}},
	{0x93, {0, 1, 2, 3, 4, 5, 6, 7, 8}},
	{0x84, {0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 7}},
	{0x84, {0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7}},
	{0xC4, {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}},
	{0x64, {0, 4, 5, 0, 1, 4, 1, 3, 4, 1, 2, 3}},
	{0x64, {0, 5, 4, 0, 4, 1, 1, 4, 3, 1, 3, 2}},
	{0x64, {0, 4, 5, 0, 3, 4, 0, 1, 3, 1, 2, 3}},
	{0x64, {0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5}},
	{0x75, {0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5, 0, 5, 6}},
	{0x95, {0, 4, 5, 0, 3, 4, 0, 1, 3, 1, 2, 3, 6, 7, 8}}
};


// The regularVertexData table gives the vertex locations for every one of the 256 possible
// cases in the modified Marching Cubes algorithm. Each 16-bit value also provides information
// about whether a vertex can be reused from a neighboring cell. See Section 3.3 for details.
// The low byte contains the indexes for the two endpoints of the edge on which the vertex lies,
// as numbered in Figure 3.7. The high byte contains the vertex reuse data shown in Figure 3.8.

const unsigned short regularVertexData[256][12] =
{
	{},
	{0x6201, 0x5102, 0x3304},
	{0x6201, 0x2315, 0x4113},
	{0x5102, 0x3304, 0x2315, 0x4113},
	{0x5102, 0x4223, 0x1326},
	{0x3304, 0x6201, 0x4223, 0x1326},
	{0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326},
	{0x4223, 0x1326, 0x3304, 0x2315, 0x4113},
	{0x4113, 0x8337, 0x4223},
	{0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337},
	{0x6201, 0x2315, 0x8337, 0x4223},
	{0x5102, 0x3304, 0x2315, 0x8337, 0x4223},
	{0x5102, 0x4113, 0x8337, 0x1326},
	{0x4113, 0x8337, 0x1326, 0x3304, 0x6201},
	{0x6201, 0x2315, 0x8337, 0x1326, 0x5102},
	{0x3304, 0x2315, 0x8337, 0x1326},
	{0x3304, 0x1146, 0x2245},
	{0x6201, 0x5102, 0x1146, 0x2245},
	{0x6201, 0x2315, 0x4113, 0x3304, 0x1146, 0x2245},
	{0x2315, 0x4113, 0x5102, 0x1146, 0x2245},
	{0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245},
	{0x1146, 0x2245, 0x6201, 0x4223, 0x1326},
	{0x3304, 0x1146, 0x2245, 0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326},
	{0x4223, 0x1326, 0x1146, 0x2245, 0x2315, 0x4113},
	{0x4223, 0x4113, 0x8337, 0x3304, 0x1146, 0x2245},
	{0x6201, 0x5102, 0x1146, 0x2245, 0x4223, 0x4113, 0x8337},
	{0x4223, 0x6201, 0x2315, 0x8337, 0x3304, 0x1146, 0x2245},
	{0x4223, 0x8337, 0x2315, 0x2245, 0x1146, 0x5102},
	{0x5102, 0x4113, 0x8337, 0x1326, 0x3304, 0x1146, 0x2245},
	{0x4113, 0x8337, 0x1326, 0x1146, 0x2245, 0x6201},
	{0x6201, 0x2315, 0x8337, 0x1326, 0x5102, 0x3304, 0x1146, 0x2245},
	{0x2245, 0x2315, 0x8337, 0x1326, 0x1146},
	{0x2315, 0x2245, 0x8157},
	{0x6201, 0x5102, 0x3304, 0x2315, 0x2245, 0x8157},
	{0x4113, 0x6201, 0x2245, 0x8157},
	{0x2245, 0x8157, 0x4113, 0x5102, 0x3304},
	{0x5102, 0x4223, 0x1326, 0x2315, 0x2245, 0x8157},
	{0x6201, 0x4223, 0x1326, 0x3304, 0x2315, 0x2245, 0x8157},
	{0x6201, 0x2245, 0x8157, 0x4113, 0x5102, 0x4223, 0x1326},
	{0x4223, 0x1326, 0x3304, 0x2245, 0x8157, 0x4113},
	{0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157},
	{0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157},
	{0x8337, 0x4223, 0x6201, 0x2245, 0x8157},
	{0x5102, 0x3304, 0x2245, 0x8157, 0x8337, 0x4223},
	{0x5102, 0x4113, 0x8337, 0x1326, 0x2315, 0x2245, 0x8157},
	{0x4113, 0x8337, 0x1326, 0x3304, 0x6201, 0x2315, 0x2245, 0x8157},
	{0x5102, 0x1326, 0x8337, 0x8157, 0x2245, 0x6201},
	{0x8157, 0x8337, 0x1326, 0x3304, 0x2245},
	{0x2315, 0x3304, 0x1146, 0x8157},
	{0x6201, 0x5102, 0x1146, 0x8157, 0x2315},
	{0x3304, 0x1146, 0x8157, 0x4113, 0x6201},
	{0x4113, 0x5102, 0x1146, 0x8157},
	{0x2315, 0x3304, 0x1146, 0x8157, 0x5102, 0x4223, 0x1326},
	{0x1326, 0x4223, 0x6201, 0x2315, 0x8157, 0x1146},
	{0x3304, 0x1146, 0x8157, 0x4113, 0x6201, 0x5102, 0x4223, 0x1326},
	{0x1326, 0x1146, 0x8157, 0x4113, 0x4223},
	{0x2315, 0x3304, 0x1146, 0x8157, 0x4223, 0x4113, 0x8337},
	{0x6201, 0x5102, 0x1146, 0x8157, 0x2315, 0x4223, 0x4113, 0x8337},
	{0x3304, 0x1146, 0x8157, 0x8337, 0x4223, 0x6201},
	{0x4223, 0x5102, 0x1146, 0x8157, 0x8337},
	{0x2315, 0x3304, 0x1146, 0x8157, 0x5102, 0x4113, 0x8337, 0x1326},
	{0x6201, 0x4113, 0x8337, 0x1326, 0x1146, 0x8157, 0x2315},
	{0x6201, 0x3304, 0x1146, 0x8157, 0x8337, 0x1326, 0x5102},
	{0x1326, 0x1146, 0x8157, 0x8337},
	{0x1326, 0x8267, 0x1146},
	{0x6201, 0x5102, 0x3304, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x2315, 0x4113, 0x1326, 0x8267, 0x1146},
	{0x5102, 0x3304, 0x2315, 0x4113, 0x1326, 0x8267, 0x1146},
	{0x5102, 0x4223, 0x8267, 0x1146},
	{0x3304, 0x6201, 0x4223, 0x8267, 0x1146},
	{0x5102, 0x4223, 0x8267, 0x1146, 0x6201, 0x2315, 0x4113},
	{0x1146, 0x8267, 0x4223, 0x4113, 0x2315, 0x3304},
	{0x4113, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x2315, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146},
	{0x5102, 0x3304, 0x2315, 0x8337, 0x4223, 0x1326, 0x8267, 0x1146},
	{0x8267, 0x1146, 0x5102, 0x4113, 0x8337},
	{0x6201, 0x4113, 0x8337, 0x8267, 0x1146, 0x3304},
	{0x6201, 0x2315, 0x8337, 0x8267, 0x1146, 0x5102},
	{0x1146, 0x3304, 0x2315, 0x8337, 0x8267},
	{0x3304, 0x1326, 0x8267, 0x2245},
	{0x1326, 0x8267, 0x2245, 0x6201, 0x5102},
	{0x3304, 0x1326, 0x8267, 0x2245, 0x6201, 0x2315, 0x4113},
	{0x1326, 0x8267, 0x2245, 0x2315, 0x4113, 0x5102},
	{0x5102, 0x4223, 0x8267, 0x2245, 0x3304},
	{0x6201, 0x4223, 0x8267, 0x2245},
	{0x5102, 0x4223, 0x8267, 0x2245, 0x3304, 0x6201, 0x2315, 0x4113},
	{0x4113, 0x4223, 0x8267, 0x2245, 0x2315},
	{0x3304, 0x1326, 0x8267, 0x2245, 0x4223, 0x4113, 0x8337},
	{0x1326, 0x8267, 0x2245, 0x6201, 0x5102, 0x4223, 0x4113, 0x8337},
	{0x3304, 0x1326, 0x8267, 0x2245, 0x4223, 0x6201, 0x2315, 0x8337},
	{0x5102, 0x1326, 0x8267, 0x2245, 0x2315, 0x8337, 0x4223},
	{0x3304, 0x2245, 0x8267, 0x8337, 0x4113, 0x5102},
	{0x8337, 0x8267, 0x2245, 0x6201, 0x4113},
	{0x5102, 0x6201, 0x2315, 0x8337, 0x8267, 0x2245, 0x3304},
	{0x2315, 0x8337, 0x8267, 0x2245},
	{0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x5102, 0x3304, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x2245, 0x8157, 0x4113, 0x1326, 0x8267, 0x1146},
	{0x2245, 0x8157, 0x4113, 0x5102, 0x3304, 0x1326, 0x8267, 0x1146},
	{0x4223, 0x8267, 0x1146, 0x5102, 0x2315, 0x2245, 0x8157},
	{0x3304, 0x6201, 0x4223, 0x8267, 0x1146, 0x2315, 0x2245, 0x8157},
	{0x4223, 0x8267, 0x1146, 0x5102, 0x6201, 0x2245, 0x8157, 0x4113},
	{0x3304, 0x2245, 0x8157, 0x4113, 0x4223, 0x8267, 0x1146},
	{0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146},
	{0x6201, 0x5102, 0x3304, 0x4223, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146},
	{0x8337, 0x4223, 0x6201, 0x2245, 0x8157, 0x1326, 0x8267, 0x1146},
	{0x4223, 0x5102, 0x3304, 0x2245, 0x8157, 0x8337, 0x1326, 0x8267, 0x1146},
	{0x8267, 0x1146, 0x5102, 0x4113, 0x8337, 0x2315, 0x2245, 0x8157},
	{0x6201, 0x4113, 0x8337, 0x8267, 0x1146, 0x3304, 0x2315, 0x2245, 0x8157},
	{0x8337, 0x8267, 0x1146, 0x5102, 0x6201, 0x2245, 0x8157},
	{0x3304, 0x2245, 0x8157, 0x8337, 0x8267, 0x1146},
	{0x8157, 0x2315, 0x3304, 0x1326, 0x8267},
	{0x8267, 0x8157, 0x2315, 0x6201, 0x5102, 0x1326},
	{0x8267, 0x1326, 0x3304, 0x6201, 0x4113, 0x8157},
	{0x8267, 0x8157, 0x4113, 0x5102, 0x1326},
	{0x5102, 0x4223, 0x8267, 0x8157, 0x2315, 0x3304},
	{0x2315, 0x6201, 0x4223, 0x8267, 0x8157},
	{0x3304, 0x5102, 0x4223, 0x8267, 0x8157, 0x4113, 0x6201},
	{0x4113, 0x4223, 0x8267, 0x8157},
	{0x8157, 0x2315, 0x3304, 0x1326, 0x8267, 0x4223, 0x4113, 0x8337},
	{0x8157, 0x2315, 0x6201, 0x5102, 0x1326, 0x8267, 0x4223, 0x4113, 0x8337},
	{0x8157, 0x8337, 0x4223, 0x6201, 0x3304, 0x1326, 0x8267},
	{0x5102, 0x1326, 0x8267, 0x8157, 0x8337, 0x4223},
	{0x8267, 0x8157, 0x2315, 0x3304, 0x5102, 0x4113, 0x8337},
	{0x6201, 0x4113, 0x8337, 0x8267, 0x8157, 0x2315},
	{0x6201, 0x3304, 0x5102, 0x8337, 0x8267, 0x8157},
	{0x8337, 0x8267, 0x8157},
	{0x8337, 0x8157, 0x8267},
	{0x6201, 0x5102, 0x3304, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267},
	{0x5102, 0x3304, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267},
	{0x5102, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x4223, 0x1326, 0x3304, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267},
	{0x4223, 0x1326, 0x3304, 0x2315, 0x4113, 0x8337, 0x8157, 0x8267},
	{0x4113, 0x8157, 0x8267, 0x4223},
	{0x4223, 0x4113, 0x8157, 0x8267, 0x6201, 0x5102, 0x3304},
	{0x8157, 0x8267, 0x4223, 0x6201, 0x2315},
	{0x3304, 0x2315, 0x8157, 0x8267, 0x4223, 0x5102},
	{0x1326, 0x5102, 0x4113, 0x8157, 0x8267},
	{0x8157, 0x4113, 0x6201, 0x3304, 0x1326, 0x8267},
	{0x1326, 0x5102, 0x6201, 0x2315, 0x8157, 0x8267},
	{0x8267, 0x1326, 0x3304, 0x2315, 0x8157},
	{0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x5102, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x2315, 0x4113, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x2315, 0x4113, 0x5102, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x1146, 0x2245, 0x6201, 0x4223, 0x1326, 0x8337, 0x8157, 0x8267},
	{0x6201, 0x2315, 0x4113, 0x5102, 0x4223, 0x1326, 0x3304, 0x1146, 0x2245, 0x8337, 0x8157, 0x8267},
	{0x4113, 0x4223, 0x1326, 0x1146, 0x2245, 0x2315, 0x8337, 0x8157, 0x8267},
	{0x4223, 0x4113, 0x8157, 0x8267, 0x3304, 0x1146, 0x2245},
	{0x6201, 0x5102, 0x1146, 0x2245, 0x4223, 0x4113, 0x8157, 0x8267},
	{0x8157, 0x8267, 0x4223, 0x6201, 0x2315, 0x3304, 0x1146, 0x2245},
	{0x2315, 0x8157, 0x8267, 0x4223, 0x5102, 0x1146, 0x2245},
	{0x1326, 0x5102, 0x4113, 0x8157, 0x8267, 0x3304, 0x1146, 0x2245},
	{0x1326, 0x1146, 0x2245, 0x6201, 0x4113, 0x8157, 0x8267},
	{0x5102, 0x6201, 0x2315, 0x8157, 0x8267, 0x1326, 0x3304, 0x1146, 0x2245},
	{0x1326, 0x1146, 0x2245, 0x2315, 0x8157, 0x8267},
	{0x2315, 0x2245, 0x8267, 0x8337},
	{0x2315, 0x2245, 0x8267, 0x8337, 0x6201, 0x5102, 0x3304},
	{0x4113, 0x6201, 0x2245, 0x8267, 0x8337},
	{0x5102, 0x4113, 0x8337, 0x8267, 0x2245, 0x3304},
	{0x2315, 0x2245, 0x8267, 0x8337, 0x5102, 0x4223, 0x1326},
	{0x6201, 0x4223, 0x1326, 0x3304, 0x8337, 0x2315, 0x2245, 0x8267},
	{0x4113, 0x6201, 0x2245, 0x8267, 0x8337, 0x5102, 0x4223, 0x1326},
	{0x4113, 0x4223, 0x1326, 0x3304, 0x2245, 0x8267, 0x8337},
	{0x2315, 0x2245, 0x8267, 0x4223, 0x4113},
	{0x2315, 0x2245, 0x8267, 0x4223, 0x4113, 0x6201, 0x5102, 0x3304},
	{0x6201, 0x2245, 0x8267, 0x4223},
	{0x3304, 0x2245, 0x8267, 0x4223, 0x5102},
	{0x5102, 0x4113, 0x2315, 0x2245, 0x8267, 0x1326},
	{0x4113, 0x2315, 0x2245, 0x8267, 0x1326, 0x3304, 0x6201},
	{0x5102, 0x6201, 0x2245, 0x8267, 0x1326},
	{0x3304, 0x2245, 0x8267, 0x1326},
	{0x8267, 0x8337, 0x2315, 0x3304, 0x1146},
	{0x5102, 0x1146, 0x8267, 0x8337, 0x2315, 0x6201},
	{0x3304, 0x1146, 0x8267, 0x8337, 0x4113, 0x6201},
	{0x8337, 0x4113, 0x5102, 0x1146, 0x8267},
	{0x8267, 0x8337, 0x2315, 0x3304, 0x1146, 0x5102, 0x4223, 0x1326},
	{0x1146, 0x8267, 0x8337, 0x2315, 0x6201, 0x4223, 0x1326},
	{0x8267, 0x8337, 0x4113, 0x6201, 0x3304, 0x1146, 0x5102, 0x4223, 0x1326},
	{0x4113, 0x4223, 0x1326, 0x1146, 0x8267, 0x8337},
	{0x3304, 0x2315, 0x4113, 0x4223, 0x8267, 0x1146},
	{0x2315, 0x6201, 0x5102, 0x1146, 0x8267, 0x4223, 0x4113},
	{0x1146, 0x8267, 0x4223, 0x6201, 0x3304},
	{0x5102, 0x1146, 0x8267, 0x4223},
	{0x8267, 0x1326, 0x5102, 0x4113, 0x2315, 0x3304, 0x1146},
	{0x6201, 0x4113, 0x2315, 0x1326, 0x1146, 0x8267},
	{0x6201, 0x3304, 0x1146, 0x8267, 0x1326, 0x5102},
	{0x1326, 0x1146, 0x8267},
	{0x1326, 0x8337, 0x8157, 0x1146},
	{0x8337, 0x8157, 0x1146, 0x1326, 0x6201, 0x5102, 0x3304},
	{0x8337, 0x8157, 0x1146, 0x1326, 0x6201, 0x2315, 0x4113},
	{0x4113, 0x5102, 0x3304, 0x2315, 0x1326, 0x8337, 0x8157, 0x1146},
	{0x8337, 0x8157, 0x1146, 0x5102, 0x4223},
	{0x6201, 0x4223, 0x8337, 0x8157, 0x1146, 0x3304},
	{0x8337, 0x8157, 0x1146, 0x5102, 0x4223, 0x6201, 0x2315, 0x4113},
	{0x4223, 0x8337, 0x8157, 0x1146, 0x3304, 0x2315, 0x4113},
	{0x4223, 0x4113, 0x8157, 0x1146, 0x1326},
	{0x4223, 0x4113, 0x8157, 0x1146, 0x1326, 0x6201, 0x5102, 0x3304},
	{0x1146, 0x8157, 0x2315, 0x6201, 0x4223, 0x1326},
	{0x4223, 0x5102, 0x3304, 0x2315, 0x8157, 0x1146, 0x1326},
	{0x4113, 0x8157, 0x1146, 0x5102},
	{0x6201, 0x4113, 0x8157, 0x1146, 0x3304},
	{0x2315, 0x8157, 0x1146, 0x5102, 0x6201},
	{0x2315, 0x8157, 0x1146, 0x3304},
	{0x2245, 0x3304, 0x1326, 0x8337, 0x8157},
	{0x6201, 0x2245, 0x8157, 0x8337, 0x1326, 0x5102},
	{0x2245, 0x3304, 0x1326, 0x8337, 0x8157, 0x6201, 0x2315, 0x4113},
	{0x2245, 0x2315, 0x4113, 0x5102, 0x1326, 0x8337, 0x8157},
	{0x4223, 0x8337, 0x8157, 0x2245, 0x3304, 0x5102},
	{0x8157, 0x2245, 0x6201, 0x4223, 0x8337},
	{0x2245, 0x3304, 0x5102, 0x4223, 0x8337, 0x8157, 0x4113, 0x6201, 0x2315},
	{0x4223, 0x8337, 0x8157, 0x2245, 0x2315, 0x4113},
	{0x4113, 0x8157, 0x2245, 0x3304, 0x1326, 0x4223},
	{0x1326, 0x4223, 0x4113, 0x8157, 0x2245, 0x6201, 0x5102},
	{0x8157, 0x2245, 0x3304, 0x1326, 0x4223, 0x6201, 0x2315},
	{0x5102, 0x1326, 0x4223, 0x2315, 0x8157, 0x2245},
	{0x3304, 0x5102, 0x4113, 0x8157, 0x2245},
	{0x4113, 0x8157, 0x2245, 0x6201},
	{0x5102, 0x6201, 0x2315, 0x8157, 0x2245, 0x3304},
	{0x2315, 0x8157, 0x2245},
	{0x1146, 0x1326, 0x8337, 0x2315, 0x2245},
	{0x1146, 0x1326, 0x8337, 0x2315, 0x2245, 0x6201, 0x5102, 0x3304},
	{0x6201, 0x2245, 0x1146, 0x1326, 0x8337, 0x4113},
	{0x2245, 0x1146, 0x1326, 0x8337, 0x4113, 0x5102, 0x3304},
	{0x5102, 0x1146, 0x2245, 0x2315, 0x8337, 0x4223},
	{0x1146, 0x3304, 0x6201, 0x4223, 0x8337, 0x2315, 0x2245},
	{0x8337, 0x4113, 0x6201, 0x2245, 0x1146, 0x5102, 0x4223},
	{0x4223, 0x8337, 0x4113, 0x3304, 0x2245, 0x1146},
	{0x4113, 0x2315, 0x2245, 0x1146, 0x1326, 0x4223},
	{0x1146, 0x1326, 0x4223, 0x4113, 0x2315, 0x2245, 0x6201, 0x5102, 0x3304},
	{0x1326, 0x4223, 0x6201, 0x2245, 0x1146},
	{0x4223, 0x5102, 0x3304, 0x2245, 0x1146, 0x1326},
	{0x2245, 0x1146, 0x5102, 0x4113, 0x2315},
	{0x4113, 0x2315, 0x2245, 0x1146, 0x3304, 0x6201},
	{0x6201, 0x2245, 0x1146, 0x5102},
	{0x3304, 0x2245, 0x1146},
	{0x3304, 0x1326, 0x8337, 0x2315},
	{0x5102, 0x1326, 0x8337, 0x2315, 0x6201},
	{0x6201, 0x3304, 0x1326, 0x8337, 0x4113},
	{0x5102, 0x1326, 0x8337, 0x4113},
	{0x4223, 0x8337, 0x2315, 0x3304, 0x5102},
	{0x6201, 0x4223, 0x8337, 0x2315},
	{0x3304, 0x5102, 0x4223, 0x8337, 0x4113, 0x6201},
	{0x4113, 0x4223, 0x8337},
	{0x4113, 0x2315, 0x3304, 0x1326, 0x4223},
	{0x1326, 0x4223, 0x4113, 0x2315, 0x6201, 0x5102},
	{0x3304, 0x1326, 0x4223, 0x6201},
	{0x5102, 0x1326, 0x4223},
	{0x5102, 0x4113, 0x2315, 0x3304},
	{0x6201, 0x4113, 0x2315},
	{0x6201, 0x3304, 0x5102},
	{}
};


// The transitionCellClass table maps a 9-bit transition cell case index to an equivalence
// class index. Even though there are 73 equivalence classes in the Transvoxel Algorithm,
// several of them use the same exact triangulations, just with different vertex locations.
// We combined those classes for this table so that the class index ranges from 0 to 55.
// The high bit is set in the cases for which the inverse state of the voxel data maps to
// the equivalence class, meaning that the winding order of each triangle should be reversed.

const unsigned char transitionCellClass[512] =
{
	0x00, 0x01, 0x02, 0x84, 0x01, 0x05, 0x04, 0x04, 0x02, 0x87, 0x09, 0x8C, 0x84, 0x0B, 0x05, 0x05,
	0x01, 0x08, 0x07, 0x8D, 0x05, 0x0F, 0x8B, 0x0B, 0x04, 0x0D, 0x0C, 0x1C, 0x04, 0x8B, 0x85, 0x85,
	0x02, 0x07, 0x09, 0x8C, 0x87, 0x10, 0x0C, 0x0C, 0x09, 0x12, 0x15, 0x9A, 0x8C, 0x19, 0x90, 0x10,
	0x84, 0x8D, 0x8C, 0x9C, 0x0B, 0x9D, 0x0F, 0x0F, 0x05, 0x1B, 0x10, 0xAC, 0x05, 0x0F, 0x8B, 0x0B,
	0x01, 0x05, 0x87, 0x0B, 0x08, 0x0F, 0x0D, 0x8B, 0x07, 0x10, 0x12, 0x19, 0x8D, 0x9D, 0x1B, 0x0F,
	0x05, 0x0F, 0x10, 0x9D, 0x0F, 0x1E, 0x1D, 0xA1, 0x8B, 0x1D, 0x99, 0x32, 0x0B, 0xA1, 0x8F, 0x94,
	0x04, 0x8B, 0x0C, 0x0F, 0x0D, 0x1D, 0x1C, 0x8F, 0x0C, 0x99, 0x1A, 0x31, 0x1C, 0x32, 0x2C, 0xA7,
	0x04, 0x0B, 0x0C, 0x0F, 0x8B, 0xA1, 0x8F, 0x96, 0x85, 0x8F, 0x90, 0x27, 0x85, 0x94, 0x8B, 0x8A,
	0x02, 0x04, 0x09, 0x05, 0x07, 0x8B, 0x0C, 0x85, 0x09, 0x0C, 0x15, 0x90, 0x8C, 0x0F, 0x10, 0x8B,
	0x87, 0x0D, 0x12, 0x1B, 0x10, 0x1D, 0x99, 0x8F, 0x0C, 0x1C, 0x1A, 0x2C, 0x0C, 0x8F, 0x90, 0x8B,
	0x09, 0x0C, 0x15, 0x10, 0x12, 0x99, 0x1A, 0x90, 0x15, 0x1A, 0x23, 0x30, 0x9A, 0x31, 0x30, 0x19,
	0x8C, 0x1C, 0x9A, 0xAC, 0x19, 0x32, 0x31, 0x27, 0x90, 0x2C, 0x30, 0x29, 0x10, 0xA7, 0x19, 0x24,
	0x84, 0x04, 0x8C, 0x05, 0x8D, 0x0B, 0x1C, 0x85, 0x8C, 0x0C, 0x9A, 0x10, 0x9C, 0x0F, 0xAC, 0x0B,
	0x0B, 0x8B, 0x19, 0x0F, 0x9D, 0xA1, 0x32, 0x94, 0x0F, 0x8F, 0x31, 0xA7, 0x0F, 0x96, 0x27, 0x8A,
	0x05, 0x85, 0x90, 0x8B, 0x1B, 0x8F, 0x2C, 0x8B, 0x10, 0x90, 0x30, 0x19, 0xAC, 0x27, 0x29, 0x24,
	0x05, 0x85, 0x10, 0x0B, 0x0F, 0x94, 0xA7, 0x8A, 0x8B, 0x8B, 0x19, 0x24, 0x0B, 0x8A, 0x24, 0x83,
	0x03, 0x06, 0x0A, 0x8B, 0x06, 0x0E, 0x0B, 0x0B, 0x0A, 0x91, 0x14, 0x8F, 0x8B, 0x17, 0x05, 0x85,
	0x06, 0x13, 0x11, 0x98, 0x0E, 0x1F, 0x97, 0x2B, 0x0B, 0x18, 0x0F, 0x36, 0x0B, 0xAB, 0x05, 0x85,
	0x0A, 0x11, 0x16, 0x8F, 0x91, 0x20, 0x0F, 0x8F, 0x14, 0x22, 0x21, 0x1D, 0x8F, 0x2D, 0x0B, 0x8B,
	0x8B, 0x98, 0x8F, 0xB7, 0x17, 0xAE, 0x8C, 0x0C, 0x05, 0x2F, 0x8B, 0xB5, 0x85, 0xA6, 0x84, 0x04,
	0x06, 0x0E, 0x91, 0x17, 0x13, 0x1F, 0x18, 0xAB, 0x11, 0x20, 0x22, 0x2D, 0x98, 0xAE, 0x2F, 0xA6,
	0x0E, 0x1F, 0x20, 0xAE, 0x1F, 0x33, 0x2E, 0x2A, 0x97, 0x2E, 0xAD, 0x28, 0x2B, 0x2A, 0x26, 0x25,
	0x0B, 0x97, 0x0F, 0x8C, 0x18, 0x2E, 0x37, 0x8C, 0x0F, 0xAD, 0x9D, 0x90, 0x36, 0x28, 0x35, 0x07,
	0x0B, 0x2B, 0x8F, 0x0C, 0xAB, 0x2A, 0x8C, 0x89, 0x05, 0x26, 0x0B, 0x87, 0x85, 0x25, 0x84, 0x82,
	0x0A, 0x0B, 0x14, 0x05, 0x11, 0x97, 0x0F, 0x05, 0x16, 0x0F, 0x21, 0x0B, 0x8F, 0x8C, 0x8B, 0x84,
	0x91, 0x18, 0x22, 0x2F, 0x20, 0x2E, 0xAD, 0x26, 0x0F, 0x37, 0x9D, 0x35, 0x8F, 0x8C, 0x0B, 0x84,
	0x14, 0x0F, 0x21, 0x8B, 0x22, 0xAD, 0x9D, 0x0B, 0x21, 0x9D, 0x9E, 0x8F, 0x1D, 0x90, 0x8F, 0x85,
	0x8F, 0x36, 0x1D, 0xB5, 0x2D, 0x28, 0x90, 0x87, 0x0B, 0x35, 0x8F, 0x34, 0x8B, 0x07, 0x85, 0x81,
	0x8B, 0x0B, 0x8F, 0x85, 0x98, 0x2B, 0x36, 0x85, 0x8F, 0x8F, 0x1D, 0x8B, 0xB7, 0x0C, 0xB5, 0x04,
	0x17, 0xAB, 0x2D, 0xA6, 0xAE, 0x2A, 0x28, 0x25, 0x8C, 0x8C, 0x90, 0x07, 0x0C, 0x89, 0x87, 0x82,
	0x05, 0x05, 0x0B, 0x84, 0x2F, 0x26, 0x35, 0x84, 0x8B, 0x0B, 0x8F, 0x85, 0xB5, 0x87, 0x34, 0x81,
	0x85, 0x85, 0x8B, 0x04, 0xA6, 0x25, 0x07, 0x82, 0x84, 0x84, 0x85, 0x81, 0x04, 0x82, 0x81, 0x80
};


// The transitionCellData table holds the triangulation data for all 56 distinct classes to
// which a case can be mapped by the transitionCellClass table. The class index should be ANDed
// with 0x7F before using it to look up triangulation data in this table.

const TransitionCellData transitionCellData[56] =
{
	{0x00, {}},
	{0x42, {0, 1, 3, 1, 2, 3}},
	{0x31, {0, 1, 2}},
	{0x42, {0, 1, 2, 0, 2, 3}},
	{0x53, {0, 1, 4, 1, 3, 4, 1, 2, 3}},
	{0x64, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4}},
	{0x84, {0, 1, 3, 1, 2, 3, 4, 5, 6, 4, 6, 7}},
	{0x73, {0, 1, 3, 1, 2, 3, 4, 5, 6}},
	{0x84, {0, 1, 3, 1, 2, 3, 4, 5, 7, 5, 6, 7}},
	{0x62, {0, 1, 2, 3, 4, 5}},
	{0x53, {0, 1, 3, 0, 3, 4, 1, 2, 3}},
	{0x75, {0, 1, 6, 1, 2, 6, 2, 5, 6, 2, 3, 5, 3, 4, 5}},
	{0x84, {0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 7}},
	{0x95, {0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 8, 6, 7, 8}},
	{0xA6, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 8, 6, 8, 9}},
	{0x86, {0, 1, 7, 1, 2, 7, 2, 3, 7, 3, 6, 7, 3, 4, 6, 4, 5, 6}},
	{0x95, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 8}},
	{0x95, {0, 1, 3, 1, 2, 3, 4, 5, 7, 4, 7, 8, 5, 6, 7}},
	{0xA4, {0, 1, 3, 1, 2, 3, 4, 5, 6, 7, 8, 9}},
	{0xC6, {0, 1, 3, 1, 2, 3, 4, 5, 7, 5, 6, 7, 8, 9, 10, 8, 10, 11}},
	{0x64, {0, 1, 3, 1, 2, 3, 0, 3, 4, 0, 4, 5}},
	{0x93, {0, 1, 2, 3, 4, 5, 6, 7, 8}},
	{0x64, {0, 1, 4, 0, 4, 5, 1, 3, 4, 1, 2, 3}},
	{0x97, {0, 1, 8, 1, 7, 8, 1, 2, 7, 2, 3, 7, 3, 4, 7, 4, 5, 7, 5, 6, 7}},
	{0xB7, {0, 1, 6, 1, 2, 6, 2, 5, 6, 2, 3, 5, 3, 4, 5, 7, 8, 10, 8, 9, 10}},
	{0xA6, {0, 1, 6, 1, 2, 6, 2, 5, 6, 2, 3, 5, 3, 4, 5, 7, 8, 9}},
	{0xB5, {0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 7, 8, 9, 10}},
	{0xA6, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 9, 7, 8, 9}},
	{0xA6, {0, 1, 4, 1, 3, 4, 1, 2, 3, 5, 6, 9, 6, 8, 9, 6, 7, 8}},
	{0x97, {0, 1, 8, 1, 2, 8, 2, 3, 8, 3, 7, 8, 3, 4, 7, 4, 5, 7, 5, 6, 7}},
	{0x86, {0, 1, 7, 1, 6, 7, 1, 2, 6, 2, 5, 6, 2, 4, 5, 2, 3, 4}},
	{0xC8, {0, 1, 7, 1, 2, 7, 2, 3, 7, 3, 6, 7, 3, 4, 6, 4, 5, 6, 8, 9, 10, 8, 10, 11}},
	{0xB7, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 9, 10, 6, 7, 9, 7, 8, 9}},
	{0x75, {0, 1, 6, 1, 3, 6, 1, 2, 3, 3, 4, 6, 4, 5, 6}},
	{0xA6, {0, 1, 3, 1, 2, 3, 4, 5, 9, 5, 8, 9, 5, 6, 8, 6, 7, 8}},
	{0xC4, {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}},
	{0x86, {1, 2, 4, 2, 3, 4, 0, 1, 7, 1, 4, 7, 4, 6, 7, 4, 5, 6}},
	{0x64, {0, 4, 5, 0, 1, 4, 1, 3, 4, 1, 2, 3}},
	{0x86, {0, 1, 4, 1, 3, 4, 1, 2, 3, 0, 4, 7, 4, 6, 7, 4, 5, 6}},
	{0x97, {1, 2, 3, 1, 3, 4, 1, 4, 5, 0, 1, 8, 1, 5, 8, 5, 7, 8, 5, 6, 7}},
	{0xA6, {0, 1, 3, 1, 2, 3, 4, 5, 9, 5, 8, 9, 5, 6, 8, 6, 7, 8}},
	{0xC8, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 11, 7, 10, 11, 7, 8, 10, 8, 9, 10}},
	{0x97, {0, 1, 8, 1, 2, 8, 2, 7, 8, 2, 3, 7, 3, 6, 7, 3, 4, 6, 4, 5, 6}},
	{0x97, {0, 1, 4, 1, 3, 4, 1, 2, 3, 0, 4, 8, 4, 7, 8, 4, 5, 7, 5, 6, 7}},
	{0xB7, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 10, 7, 9, 10, 7, 8, 9}},
	{0xA8, {0, 1, 9, 1, 2, 9, 2, 8, 9, 2, 3, 8, 3, 7, 8, 3, 4, 7, 4, 6, 7, 4, 5, 6}},
	{0xB9, {0, 1, 7, 1, 6, 7, 1, 2, 6, 2, 5, 6, 2, 3, 5, 3, 4, 5, 0, 7, 10, 7, 9, 10, 7, 8, 9}},
	{0xA6, {0, 1, 5, 1, 4, 5, 1, 2, 4, 2, 3, 4, 6, 7, 9, 7, 8, 9}},
	{0xC6, {0, 1, 5, 1, 2, 5, 2, 4, 5, 2, 3, 4, 6, 7, 8, 9, 10, 11}},
	{0xB7, {0, 1, 7, 1, 2, 7, 2, 3, 7, 3, 6, 7, 3, 4, 6, 4, 5, 6, 8, 9, 10}},
	{0xA8, {1, 2, 3, 1, 3, 4, 1, 4, 6, 4, 5, 6, 0, 1, 9, 1, 6, 9, 6, 8, 9, 6, 7, 8}},
	{0xCC, {0, 1, 9, 1, 8, 9, 1, 2, 8, 2, 11, 8, 2, 3, 11, 3, 4, 11, 4, 5, 11, 5, 10, 11, 5, 6, 10, 6, 9, 10, 6, 7, 9, 7, 0, 9}},
	{0x86, {0, 1, 2, 0, 2, 3, 0, 6, 7, 0, 3, 6, 1, 4, 5, 1, 5, 2}},
	{0x97, {0, 1, 4, 1, 3, 4, 1, 2, 3, 2, 5, 6, 2, 6, 3, 0, 7, 8, 0, 4, 7}},
	{0xA8, {0, 1, 5, 1, 4, 5, 1, 2, 4, 2, 3, 4, 3, 6, 7, 3, 7, 4, 0, 8, 9, 0, 5, 8}},
	{0xA8, {0, 1, 5, 1, 4, 5, 1, 2, 4, 2, 3, 4, 2, 6, 3, 3, 6, 7, 0, 8, 9, 0, 5, 8}}
};


// The transitionCornerData table contains the transition cell corner reuse data
// shown in Figure 4.18.

const unsigned char transitionCornerData[13] =
{
	0x30, 0x21, 0x20, 0x12, 0x40, 0x82, 0x10, 0x81, 0x80, 0x37, 0x27, 0x17, 0x87
};


// The transitionVertexData table gives the vertex locations for every one of the 512 possible
// cases in the Tranvoxel Algorithm. Each 16-bit value also provides information about whether
// a vertex can be reused from a neighboring cell. See Section 4.5 for details. The low byte
// contains the indexes for the two endpoints of the edge on which the vertex lies, as numbered
// in Figure 4.16. The high byte contains the vertex reuse data shown in Figure 4.17.

const unsigned short transitionVertexData[512][12] =
{
	{},
	{0x2301, 0x1503, 0x199B, 0x289A},
	{0x2301, 0x2412, 0x4514},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B},
	{0x8525, 0x2412, 0x289A, 0x89AC},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x8525, 0x4514, 0x1503, 0x199B, 0x89AC},
	{0x8525, 0x8658, 0x4445},
	{0x1503, 0x2301, 0x289A, 0x199B, 0x8658, 0x8525, 0x4445},
	{0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x8525, 0x4445},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x1503, 0x199B, 0x89AC},
	{0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x8478, 0x88BC, 0x89AC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x88BC},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x8478, 0x88BC, 0x289A},
	{0x8478, 0x8658, 0x8525, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x1503, 0x199B, 0x289A},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2412, 0x4514, 0x1503, 0x199B, 0x289A},
	{0x8478, 0x4445, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x2301, 0x2412, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x2301, 0x4514, 0x4445, 0x8478, 0x88BC, 0x289A},
	{0x1503, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x8367, 0x4647},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647},
	{0x2301, 0x2412, 0x4514, 0x8478, 0x8367, 0x4647},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8367, 0x8478, 0x4647},
	{0x2412, 0x8525, 0x89AC, 0x289A, 0x8367, 0x8478, 0x4647},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8525, 0x4514, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x8525, 0x4445, 0x8367, 0x8478, 0x4647},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x8478, 0x4647},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x2301, 0x4514, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x8478, 0x4647},
	{0x8658, 0x4445, 0x4514, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x2301, 0x289A, 0x199B},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x2412, 0x2301, 0x4514},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x2301, 0x2412, 0x8525, 0x8658, 0x4647, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x88BC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x1503, 0x199B, 0x289A},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514},
	{0x8525, 0x4445, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x4514, 0x2412, 0x289A, 0x199B},
	{0x8367, 0x4647, 0x4445, 0x2412, 0x289A, 0x88BC},
	{0x8367, 0x4647, 0x4445, 0x2412, 0x2301, 0x1503, 0x199B, 0x88BC},
	{0x2301, 0x4514, 0x4445, 0x4647, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x4647, 0x4445, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x1636, 0x8367, 0x88BC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x1636, 0x199B, 0x88BC, 0x2412, 0x2301, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x89AC},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x1636, 0x1503, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x1636, 0x199B, 0x88BC},
	{0x8367, 0x1636, 0x1503, 0x2301, 0x2412, 0x4445, 0x8658, 0x89AC, 0x88BC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8658, 0x4445, 0x4514, 0x1503, 0x1636, 0x8367, 0x88BC, 0x89AC},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x289A},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x8658, 0x8478, 0x8367, 0x1636, 0x1503, 0x4514, 0x2412, 0x289A, 0x89AC},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x199B},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x1503},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x199B},
	{0x1503, 0x4514, 0x8525, 0x8658, 0x8478, 0x8367, 0x1636},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x1636, 0x199B, 0x89AC},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x289A},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x1636, 0x199B, 0x89AC, 0x2412, 0x2301, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x289A},
	{0x1636, 0x8367, 0x8478, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x4445, 0x8478, 0x8367, 0x1636, 0x1503, 0x2301},
	{0x2301, 0x4514, 0x4445, 0x8478, 0x8367, 0x1636, 0x199B, 0x289A},
	{0x8367, 0x1636, 0x1503, 0x4514, 0x4445, 0x8478},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x2301, 0x289A, 0x88BC},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x289A},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x2412, 0x289A, 0x89AC},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x89AC},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x2301, 0x289A, 0x88BC, 0x8658, 0x8525, 0x4445},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8658, 0x4445, 0x2412, 0x289A, 0x89AC},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x4514, 0x4445, 0x8658, 0x89AC, 0x88BC},
	{0x1636, 0x4647, 0x8658, 0x89AC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x1636, 0x4647, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x2412, 0x8525, 0x8658, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x8658, 0x4647, 0x1636, 0x1503, 0x2301, 0x2412, 0x8525},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x1503, 0x4514, 0x8525, 0x8658, 0x4647, 0x1636},
	{0x8525, 0x4445, 0x4647, 0x1636, 0x199B, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x1636, 0x1503, 0x2301, 0x289A, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x1636, 0x199B, 0x89AC, 0x2412, 0x2301, 0x4514},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x4445, 0x8525, 0x89AC, 0x289A},
	{0x2412, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x1503, 0x2301, 0x2412, 0x4445, 0x4647, 0x1636},
	{0x2301, 0x4514, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x1503, 0x4514, 0x4445, 0x4647, 0x1636},
	{0x1636, 0x1503, 0x4334},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x8525, 0x89AC, 0x199B},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x8525, 0x89AC, 0x199B},
	{0x1636, 0x1503, 0x4334, 0x8525, 0x8658, 0x4445},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x8525, 0x4445},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x1503, 0x1636, 0x4334},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x4445, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x88BC, 0x89AC, 0x1503, 0x1636, 0x4334},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x88BC},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x8478, 0x88BC, 0x289A, 0x1503, 0x1636, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x8525, 0x8658, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x4445, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x2301, 0x4514, 0x4445, 0x8478, 0x88BC, 0x289A, 0x1503, 0x1636, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647},
	{0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x8525, 0x89AC, 0x199B, 0x8367, 0x8478, 0x4647},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647},
	{0x1636, 0x4334, 0x4514, 0x8525, 0x89AC, 0x199B, 0x8367, 0x8478, 0x4647},
	{0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647, 0x8525, 0x8658, 0x4445},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x8478, 0x4647, 0x1503, 0x1636, 0x4334},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334, 0x8478, 0x8367, 0x4647},
	{0x8658, 0x4445, 0x4514, 0x4334, 0x1636, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x1636, 0x4334},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8367, 0x4647, 0x8658, 0x89AC, 0x88BC},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x1636, 0x4334, 0x2412, 0x2301, 0x4514},
	{0x1636, 0x4334, 0x4514, 0x2412, 0x289A, 0x199B, 0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x88BC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x4334, 0x1636, 0x199B, 0x88BC},
	{0x8525, 0x4445, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x1636, 0x4334},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514, 0x1636, 0x1503, 0x4334},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x8367, 0x4647, 0x4445, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x4445, 0x4647, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x4647, 0x4445, 0x4514, 0x2301, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x8367, 0x4647, 0x4445, 0x4514, 0x4334, 0x1636, 0x199B, 0x88BC},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC},
	{0x2301, 0x4334, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC, 0x2412, 0x2301, 0x4514},
	{0x2412, 0x4514, 0x4334, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC, 0x2412, 0x8525, 0x89AC, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1503, 0x4334, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC, 0x8658, 0x8525, 0x4445},
	{0x2301, 0x4334, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC, 0x2412, 0x2301, 0x4514, 0x8658, 0x8525, 0x4445},
	{0x2412, 0x4514, 0x4334, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x4334, 0x1503, 0x199B, 0x88BC},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x2301, 0x4514, 0x4445, 0x8658, 0x89AC, 0x289A, 0x8367, 0x4334, 0x1503, 0x199B, 0x88BC},
	{0x8658, 0x4445, 0x4514, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x4334, 0x8367, 0x8478, 0x8658, 0x89AC, 0x289A},
	{0x2412, 0x8525, 0x8658, 0x8478, 0x8367, 0x4334, 0x1503, 0x199B, 0x289A},
	{0x8367, 0x4334, 0x2301, 0x2412, 0x8525, 0x8658, 0x8478},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x4334, 0x4514, 0x8525},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x199B},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x4334, 0x4514, 0x2412, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x8367, 0x4334, 0x2301, 0x2412, 0x4445, 0x8478},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x4514, 0x2301, 0x289A, 0x199B},
	{0x8367, 0x4334, 0x4514, 0x4445, 0x8478},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4647, 0x4334, 0x2301, 0x289A, 0x88BC},
	{0x8478, 0x4647, 0x4334, 0x1503, 0x199B, 0x88BC, 0x2412, 0x2301, 0x4514},
	{0x8478, 0x4647, 0x4334, 0x4514, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x2412, 0x289A, 0x89AC},
	{0x8478, 0x4647, 0x4334, 0x2301, 0x2412, 0x8525, 0x89AC, 0x88BC},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x8478, 0x4647, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445},
	{0x8478, 0x4647, 0x4334, 0x2301, 0x289A, 0x88BC, 0x8658, 0x8525, 0x4445},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x4334, 0x4647, 0x8478, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x8478, 0x4647, 0x4334, 0x1503, 0x199B, 0x88BC, 0x2412, 0x4445, 0x8658, 0x89AC, 0x289A},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x4647, 0x8478, 0x88BC, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC, 0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8658, 0x4445, 0x4514, 0x4334, 0x4647, 0x8478, 0x88BC, 0x89AC},
	{0x1503, 0x4334, 0x4647, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x4647, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x4334, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x1503, 0x4334, 0x4647, 0x8658, 0x8525, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x8525, 0x8658, 0x4647, 0x4334, 0x2301},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x4647, 0x4334, 0x1503, 0x199B, 0x289A},
	{0x8658, 0x4647, 0x4334, 0x4514, 0x8525},
	{0x8525, 0x4445, 0x4647, 0x4334, 0x1503, 0x199B, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x4647, 0x4445, 0x8525, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2412, 0x4514, 0x4334, 0x4647, 0x4445, 0x8525, 0x89AC, 0x289A},
	{0x1503, 0x4334, 0x4647, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x4445, 0x4647, 0x4334, 0x2301},
	{0x1503, 0x4334, 0x4647, 0x4445, 0x4514, 0x2301, 0x289A, 0x199B},
	{0x4514, 0x4445, 0x4647, 0x4334},
	{0x4514, 0x4445, 0x4647, 0x4334},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x4334, 0x4514, 0x4445, 0x4647},
	{0x2412, 0x4445, 0x4647, 0x4334, 0x2301},
	{0x1503, 0x4334, 0x4647, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x4514, 0x4445, 0x4647, 0x4334},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC, 0x4514, 0x4445, 0x4647, 0x4334},
	{0x8525, 0x4445, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x4334, 0x1503, 0x199B, 0x89AC},
	{0x8658, 0x4647, 0x4334, 0x4514, 0x8525},
	{0x1503, 0x2301, 0x289A, 0x199B, 0x8525, 0x4514, 0x4334, 0x4647, 0x8658},
	{0x2412, 0x8525, 0x8658, 0x4647, 0x4334, 0x2301},
	{0x1503, 0x4334, 0x4647, 0x8658, 0x8525, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x4514, 0x4334, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x8658, 0x4647, 0x4334, 0x4514, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x8658, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x4647, 0x8658, 0x89AC, 0x199B},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x4445, 0x4647, 0x4334, 0x4514},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC, 0x4334, 0x4514, 0x4445, 0x4647},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x2412, 0x4445, 0x4647, 0x4334, 0x2301},
	{0x1503, 0x4334, 0x4647, 0x4445, 0x2412, 0x289A, 0x199B, 0x8658, 0x8478, 0x88BC, 0x89AC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC, 0x4445, 0x4647, 0x4334, 0x4514},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x88BC, 0x4514, 0x4445, 0x4647, 0x4334},
	{0x2301, 0x4334, 0x4647, 0x4445, 0x8525, 0x8658, 0x8478, 0x88BC, 0x289A},
	{0x8478, 0x8658, 0x8525, 0x4445, 0x4647, 0x4334, 0x1503, 0x199B, 0x88BC},
	{0x8478, 0x4647, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x4647, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x1503, 0x199B, 0x289A},
	{0x8478, 0x4647, 0x4334, 0x2301, 0x2412, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x4647, 0x4334, 0x1503, 0x2412, 0x8525, 0x199B, 0x289A, 0x89AC, 0x88BC},
	{0x8478, 0x4647, 0x4334, 0x4514, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x2301, 0x2412, 0x4514, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4647, 0x4334, 0x2301, 0x289A, 0x88BC},
	{0x1503, 0x4334, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8367, 0x4334, 0x4514, 0x4445, 0x8478},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8367, 0x4334, 0x4514, 0x4445, 0x8478},
	{0x8367, 0x4334, 0x2301, 0x2412, 0x4445, 0x8478},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x8525, 0x89AC, 0x289A, 0x8478, 0x4445, 0x4514, 0x4334, 0x8367},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC, 0x8367, 0x4334, 0x4514, 0x4445, 0x8478},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x4334, 0x4514, 0x8525},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8367, 0x4334, 0x4514, 0x8525, 0x8658, 0x8478},
	{0x8367, 0x4334, 0x2301, 0x2412, 0x8525, 0x8658, 0x8478},
	{0x2412, 0x8525, 0x8658, 0x8478, 0x8367, 0x4334, 0x1503, 0x199B, 0x289A},
	{0x2412, 0x4514, 0x4334, 0x8367, 0x8478, 0x8658, 0x89AC, 0x289A},
	{0x8658, 0x8478, 0x8367, 0x4334, 0x4514, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x8658, 0x8478, 0x8367, 0x4334, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x4445, 0x4514, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x4334, 0x8367, 0x88BC, 0x89AC, 0x1503, 0x2301, 0x289A, 0x199B},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x8658, 0x4445, 0x2412, 0x1503, 0x4334, 0x8367, 0x289A, 0x199B, 0x88BC, 0x89AC},
	{0x8367, 0x4334, 0x4514, 0x4445, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x2301, 0x2412, 0x8525, 0x8658, 0x4445, 0x4514, 0x4334, 0x8367, 0x88BC, 0x199B},
	{0x2301, 0x4334, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC, 0x8658, 0x8525, 0x4445},
	{0x8367, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x8367, 0x4334, 0x4514, 0x8525, 0x89AC, 0x88BC, 0x2301, 0x1503, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x4334, 0x8367, 0x88BC, 0x89AC},
	{0x1503, 0x4334, 0x8367, 0x8525, 0x2412, 0x88BC, 0x89AC, 0x289A, 0x199B},
	{0x2412, 0x4514, 0x4334, 0x8367, 0x88BC, 0x289A},
	{0x1503, 0x2301, 0x2412, 0x4514, 0x4334, 0x8367, 0x88BC, 0x199B},
	{0x2301, 0x4334, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x4334, 0x1503, 0x199B, 0x88BC},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x4647, 0x4334, 0x4514, 0x4445},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A, 0x4334, 0x4514, 0x4445, 0x4647},
	{0x8367, 0x1636, 0x199B, 0x88BC, 0x2301, 0x4334, 0x4647, 0x4445, 0x2412},
	{0x2412, 0x4445, 0x4647, 0x4334, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B, 0x4514, 0x4445, 0x4647, 0x4334},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x89AC, 0x4334, 0x4514, 0x4445, 0x4647},
	{0x8525, 0x4445, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x1636, 0x1503, 0x4334, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x8658, 0x4647, 0x4334, 0x4514, 0x8525},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A, 0x8658, 0x4647, 0x4334, 0x4514, 0x8525},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x8658, 0x4647, 0x4334, 0x2301, 0x2412, 0x8525},
	{0x2412, 0x8525, 0x8658, 0x4647, 0x4334, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x2412, 0x4514, 0x4334, 0x4647, 0x8658, 0x89AC, 0x289A, 0x8367, 0x1636, 0x199B, 0x88BC},
	{0x8367, 0x1636, 0x1503, 0x2301, 0x2412, 0x4514, 0x4334, 0x4647, 0x8658, 0x89AC, 0x88BC},
	{0x8658, 0x4647, 0x4334, 0x2301, 0x289A, 0x89AC, 0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x1636, 0x1503, 0x4334, 0x4647, 0x8658, 0x89AC, 0x88BC},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B, 0x4647, 0x4334, 0x4514, 0x4445},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x289A, 0x4647, 0x4334, 0x4514, 0x4445},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B, 0x2412, 0x4445, 0x4647, 0x4334, 0x2301},
	{0x8658, 0x8478, 0x8367, 0x1636, 0x1503, 0x4334, 0x4647, 0x4445, 0x2412, 0x289A, 0x89AC},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x199B, 0x4445, 0x4647, 0x4334, 0x4514},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x4334, 0x4514, 0x4445, 0x4647},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x4445, 0x4647, 0x4334, 0x2301, 0x289A, 0x199B},
	{0x1503, 0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x4445, 0x4647, 0x4334},
	{0x8525, 0x4514, 0x4334, 0x4647, 0x8478, 0x8367, 0x1636, 0x199B, 0x89AC},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x4647, 0x4334, 0x4514, 0x8525, 0x89AC, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x4334, 0x4647, 0x8478, 0x8367, 0x1636, 0x199B, 0x89AC},
	{0x2412, 0x8525, 0x89AC, 0x289A, 0x1503, 0x1636, 0x8367, 0x8478, 0x4647, 0x4334},
	{0x1636, 0x8367, 0x8478, 0x4647, 0x4334, 0x4514, 0x2412, 0x289A, 0x199B},
	{0x2412, 0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x4647, 0x4334, 0x4514},
	{0x1636, 0x8367, 0x8478, 0x4647, 0x4334, 0x2301, 0x289A, 0x199B},
	{0x1636, 0x8367, 0x8478, 0x4647, 0x4334, 0x1503},
	{0x1636, 0x4334, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4445, 0x4514, 0x4334, 0x1636, 0x1503, 0x2301, 0x289A, 0x88BC},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4445, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B, 0x8525, 0x2412, 0x289A, 0x89AC},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x4334, 0x4514, 0x4445, 0x8478, 0x88BC, 0x89AC},
	{0x1636, 0x4334, 0x2301, 0x8525, 0x4445, 0x8478, 0x289A, 0x89AC, 0x88BC, 0x199B},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x8525, 0x8658, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x8658, 0x8525, 0x4514, 0x4334, 0x1636, 0x1503, 0x2301, 0x289A, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC, 0x1636, 0x1503, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x2412, 0x8658, 0x8478, 0x289A, 0x89AC, 0x88BC, 0x199B},
	{0x8658, 0x8478, 0x88BC, 0x89AC, 0x2412, 0x2301, 0x1503, 0x1636, 0x4334, 0x4514},
	{0x1636, 0x4334, 0x2301, 0x8658, 0x8478, 0x289A, 0x89AC, 0x88BC, 0x199B},
	{0x8658, 0x8478, 0x88BC, 0x89AC, 0x1503, 0x1636, 0x4334},
	{0x1636, 0x4334, 0x4514, 0x4445, 0x8658, 0x89AC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x4334, 0x4514, 0x4445, 0x8658, 0x89AC, 0x289A},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x4334, 0x1636, 0x199B, 0x89AC},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A, 0x1503, 0x1636, 0x4334},
	{0x2412, 0x8525, 0x8658, 0x4445, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x8658, 0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x4334, 0x4514, 0x4445},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x1636, 0x1503, 0x4334, 0x8525, 0x8658, 0x4445},
	{0x1636, 0x4334, 0x4514, 0x8525, 0x89AC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x4334, 0x4514, 0x8525, 0x89AC, 0x289A},
	{0x1636, 0x4334, 0x2301, 0x2412, 0x8525, 0x89AC, 0x199B},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1636, 0x1503, 0x4334},
	{0x2412, 0x4514, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x2301, 0x1503, 0x1636, 0x4334, 0x4514, 0x2412},
	{0x2301, 0x4334, 0x1636, 0x199B, 0x289A},
	{0x1636, 0x1503, 0x4334},
	{0x1503, 0x4514, 0x4445, 0x4647, 0x1636},
	{0x2301, 0x4514, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x1503, 0x2301, 0x2412, 0x4445, 0x4647, 0x1636},
	{0x2412, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1503, 0x4514, 0x4445, 0x4647, 0x1636},
	{0x1636, 0x4647, 0x4445, 0x4514, 0x2301, 0x2412, 0x8525, 0x89AC, 0x199B},
	{0x8525, 0x4445, 0x4647, 0x1636, 0x1503, 0x2301, 0x289A, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x1636, 0x199B, 0x89AC},
	{0x1503, 0x4514, 0x8525, 0x8658, 0x4647, 0x1636},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x8658, 0x4647, 0x1636, 0x1503, 0x2301, 0x2412, 0x8525},
	{0x2412, 0x8525, 0x8658, 0x4647, 0x1636, 0x199B, 0x289A},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x1636, 0x4647, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2301, 0x1503, 0x1636, 0x4647, 0x8658, 0x89AC, 0x289A},
	{0x1636, 0x4647, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x88BC, 0x89AC, 0x1636, 0x4647, 0x4445, 0x4514, 0x1503},
	{0x2301, 0x4514, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x2412, 0x4445, 0x4647, 0x1636, 0x1503, 0x2301},
	{0x2412, 0x4445, 0x4647, 0x1636, 0x199B, 0x289A, 0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC, 0x1503, 0x4514, 0x4445, 0x4647, 0x1636},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x4514, 0x4445, 0x4647, 0x1636, 0x199B, 0x88BC},
	{0x2301, 0x1503, 0x1636, 0x4647, 0x4445, 0x8525, 0x8658, 0x8478, 0x88BC, 0x289A},
	{0x8478, 0x8658, 0x8525, 0x4445, 0x4647, 0x1636, 0x199B, 0x88BC},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x2301, 0x4514, 0x8525, 0x8478, 0x4647, 0x1636, 0x89AC, 0x88BC, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x89AC},
	{0x8478, 0x4647, 0x1636, 0x2412, 0x8525, 0x199B, 0x289A, 0x89AC, 0x88BC},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x4647, 0x8478, 0x88BC, 0x289A},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x8478, 0x4647, 0x1636, 0x1503, 0x2301, 0x289A, 0x88BC},
	{0x1636, 0x4647, 0x8478, 0x88BC, 0x199B},
	{0x8367, 0x1636, 0x1503, 0x4514, 0x4445, 0x8478},
	{0x2301, 0x4514, 0x4445, 0x8478, 0x8367, 0x1636, 0x199B, 0x289A},
	{0x2412, 0x4445, 0x8478, 0x8367, 0x1636, 0x1503, 0x2301},
	{0x1636, 0x8367, 0x8478, 0x4445, 0x2412, 0x289A, 0x199B},
	{0x8525, 0x2412, 0x289A, 0x89AC, 0x1503, 0x4514, 0x4445, 0x8478, 0x8367, 0x1636},
	{0x1636, 0x8367, 0x8478, 0x4445, 0x4514, 0x2301, 0x2412, 0x8525, 0x89AC, 0x199B},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x4445, 0x8525, 0x89AC, 0x289A},
	{0x8525, 0x4445, 0x8478, 0x8367, 0x1636, 0x199B, 0x89AC},
	{0x1503, 0x4514, 0x8525, 0x8658, 0x8478, 0x8367, 0x1636},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x199B},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x1503},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x1636, 0x1503, 0x4514, 0x2412, 0x289A, 0x89AC},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B, 0x2301, 0x2412, 0x4514},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x289A},
	{0x1636, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x4445, 0x4514, 0x1503, 0x1636, 0x8367, 0x88BC, 0x89AC},
	{0x2301, 0x4514, 0x4445, 0x8658, 0x8367, 0x1636, 0x89AC, 0x88BC, 0x199B, 0x289A},
	{0x8367, 0x1636, 0x1503, 0x2301, 0x2412, 0x4445, 0x8658, 0x89AC, 0x88BC},
	{0x8658, 0x4445, 0x2412, 0x1636, 0x8367, 0x289A, 0x199B, 0x88BC, 0x89AC},
	{0x8367, 0x1636, 0x1503, 0x4514, 0x4445, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x8367, 0x1636, 0x199B, 0x88BC, 0x8658, 0x8525, 0x2412, 0x2301, 0x4514, 0x4445},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A, 0x8525, 0x8658, 0x4445},
	{0x1636, 0x8367, 0x88BC, 0x199B, 0x8525, 0x8658, 0x4445},
	{0x8367, 0x1636, 0x1503, 0x4514, 0x8525, 0x89AC, 0x88BC},
	{0x2301, 0x4514, 0x8525, 0x8367, 0x1636, 0x89AC, 0x88BC, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x89AC},
	{0x2412, 0x8525, 0x8367, 0x1636, 0x89AC, 0x88BC, 0x199B, 0x289A},
	{0x2412, 0x4514, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x1636, 0x199B, 0x88BC, 0x2412, 0x2301, 0x4514},
	{0x2301, 0x1503, 0x1636, 0x8367, 0x88BC, 0x289A},
	{0x1636, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x4647, 0x4445, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x2301, 0x4514, 0x4445, 0x4647, 0x8367, 0x88BC, 0x289A},
	{0x8367, 0x4647, 0x4445, 0x2412, 0x2301, 0x1503, 0x199B, 0x88BC},
	{0x8367, 0x4647, 0x4445, 0x2412, 0x289A, 0x88BC},
	{0x8367, 0x4647, 0x4445, 0x4514, 0x1503, 0x199B, 0x88BC, 0x2412, 0x8525, 0x89AC, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x4514, 0x4445, 0x4647, 0x8367, 0x88BC, 0x89AC},
	{0x8525, 0x4445, 0x4647, 0x8367, 0x1503, 0x2301, 0x88BC, 0x199B, 0x289A, 0x89AC},
	{0x8367, 0x4647, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x4514, 0x2301, 0x289A, 0x88BC},
	{0x1503, 0x2301, 0x2412, 0x8525, 0x8658, 0x4647, 0x8367, 0x88BC, 0x199B},
	{0x8367, 0x4647, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x2412, 0x4514, 0x1503, 0x8367, 0x4647, 0x8658, 0x199B, 0x88BC, 0x89AC, 0x289A},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC, 0x2412, 0x2301, 0x4514},
	{0x8367, 0x4647, 0x8658, 0x2301, 0x1503, 0x89AC, 0x289A, 0x199B, 0x88BC},
	{0x8658, 0x4647, 0x8367, 0x88BC, 0x89AC},
	{0x1503, 0x4514, 0x4445, 0x4647, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x4647, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x1503, 0x2301, 0x2412, 0x4445, 0x4647, 0x8367, 0x8478, 0x8658, 0x89AC, 0x199B},
	{0x8658, 0x8478, 0x8367, 0x4647, 0x4445, 0x2412, 0x289A, 0x89AC},
	{0x2412, 0x8525, 0x8658, 0x8478, 0x8367, 0x4647, 0x4445, 0x4514, 0x1503, 0x199B, 0x289A},
	{0x8367, 0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x4514, 0x4445, 0x4647},
	{0x1503, 0x2301, 0x289A, 0x199B, 0x8367, 0x8478, 0x8658, 0x8525, 0x4445, 0x4647},
	{0x8478, 0x8658, 0x8525, 0x4445, 0x4647, 0x8367},
	{0x8525, 0x4514, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC, 0x8478, 0x8367, 0x4647},
	{0x2412, 0x8525, 0x89AC, 0x289A, 0x8367, 0x8478, 0x4647},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B, 0x8367, 0x8478, 0x4647},
	{0x2301, 0x2412, 0x4514, 0x8478, 0x8367, 0x4647},
	{0x2301, 0x1503, 0x199B, 0x289A, 0x8478, 0x8367, 0x4647},
	{0x8478, 0x8367, 0x4647},
	{0x1503, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x2301, 0x4514, 0x4445, 0x8478, 0x88BC, 0x289A},
	{0x1503, 0x2301, 0x2412, 0x4445, 0x8478, 0x88BC, 0x199B},
	{0x8478, 0x4445, 0x2412, 0x289A, 0x88BC},
	{0x1503, 0x4514, 0x4445, 0x8478, 0x88BC, 0x199B, 0x8525, 0x2412, 0x289A, 0x89AC},
	{0x8525, 0x2412, 0x2301, 0x4514, 0x4445, 0x8478, 0x88BC, 0x89AC},
	{0x8525, 0x4445, 0x8478, 0x1503, 0x2301, 0x88BC, 0x199B, 0x289A, 0x89AC},
	{0x8478, 0x4445, 0x8525, 0x89AC, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x4514, 0x1503, 0x199B, 0x88BC},
	{0x2301, 0x4514, 0x8525, 0x8658, 0x8478, 0x88BC, 0x289A},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x88BC},
	{0x8478, 0x8658, 0x8525, 0x2412, 0x289A, 0x88BC},
	{0x2412, 0x4514, 0x1503, 0x8478, 0x8658, 0x199B, 0x88BC, 0x89AC, 0x289A},
	{0x8478, 0x8658, 0x89AC, 0x88BC, 0x2301, 0x2412, 0x4514},
	{0x1503, 0x2301, 0x8658, 0x8478, 0x289A, 0x89AC, 0x88BC, 0x199B},
	{0x8478, 0x8658, 0x89AC, 0x88BC},
	{0x8658, 0x4445, 0x4514, 0x1503, 0x199B, 0x89AC},
	{0x8658, 0x4445, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x8658, 0x4445, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x2412, 0x4445, 0x8658, 0x89AC, 0x289A},
	{0x2412, 0x8525, 0x8658, 0x4445, 0x4514, 0x1503, 0x199B, 0x289A},
	{0x8525, 0x2412, 0x2301, 0x4514, 0x4445, 0x8658},
	{0x1503, 0x2301, 0x289A, 0x199B, 0x8658, 0x8525, 0x4445},
	{0x8525, 0x8658, 0x4445},
	{0x8525, 0x4514, 0x1503, 0x199B, 0x89AC},
	{0x8525, 0x4514, 0x2301, 0x289A, 0x89AC},
	{0x8525, 0x2412, 0x2301, 0x1503, 0x199B, 0x89AC},
	{0x8525, 0x2412, 0x289A, 0x89AC},
	{0x1503, 0x4514, 0x2412, 0x289A, 0x199B},
	{0x2301, 0x2412, 0x4514},
	{0x2301, 0x1503, 0x199B, 0x289A},
	{}
};


namespace GEMTest {

	struct IntCords3 {
		int x, y, z;

		IntCords3(int _x, int _y, int _z) : x(_x), y(_y), z(_z) {}
		IntCords3(int val) : x(val), y(val), z(val) {}

		int square() {
			return x * x + y * y + z * z;
		}

		IntCords3 add(IntCords3 other) {
			return IntCords3(x + other.x, y + other.y, z + other.z);
		}

		IntCords3 mul(IntCords3 other) {
			return IntCords3(x * other.x, y * other.y, z * other.z);
		}
		IntCords3 mul(int scalar) {
			return IntCords3(x * scalar, y * scalar, z * scalar);
		}


		void smul(int scalar) {
			x *= scalar;
			y *= scalar;
			z *= scalar;
		}

		IntCords3 operator+(const IntCords3& s2) const {
			return IntCords3(x + s2.x, y + s2.y, z + s2.z);
		}
		IntCords3 operator-(const IntCords3& s2) const {
			return IntCords3(x - s2.x, y - s2.y, z - s2.z);
		}

		IntCords3 operator*(const IntCords3& s2) const {
			return IntCords3(x * s2.x, y * s2.y, z * s2.z);
		}

		int distanceSquared() {
			return x * x + y * y + z * z;
		}


		bool operator<(const IntCords3& s2) const
		{
			return std::tie(x, y, z) < std::tie(s2.x, s2.y, s2.z);
		}

		bool operator==(const IntCords3& s2) const
		{
			return std::tie(x, y, z) == std::tie(s2.x, s2.y, s2.z);
		}


	};

	struct ChunkData {

		struct ChunkNode {
			char volume;
		};

		struct subchunk {
			ChunkNode Nodes[CHUNK_SIZE][CHUNK_SIZE][CHUNK_SIZE];
		};

		subchunk subchunks[CHUNK_LOD][CHUNK_LOD][CHUNK_LOD];


		inline subchunk& getSubchunk(int _x, int _y, int _z) {
			return subchunks[_x][_y][_z];
		}

		int x, y, z;

		ChunkData(int _x, int _y, int _z) : x(_x), y(_y), z(_z) {}

	};

	class InnerBlock {

	public:

		std::weak_ptr<InnerBlock> m_neighbours[7];

		GEM::LandscapeVisualization* m_vis = nullptr;
		int x, y, z;
		std::vector<GEM::LandscapeVisualMesh> meshes;

		GEM::LandscapeVisualMesh debugBox;
		std::vector<GEM::LandscapeVisualMesh> debugSubchunkMeshes;
		int level = 0;

		ChunkData chunkData;

		IntCords3 pos() {
			return IntCords3(x, y, z);
		}


		int currLevel = -1;

		InnerBlock(int _x, int _y, int _z, int _level) : x(_x), y(_y), z(_z), chunkData(_x, _y, _z) {}

		bool allNeighboursAvaliable() {

			for (int i = 0; i < 7; i++) {
				if (m_neighbours[i].expired()) {
					return false;
				}
			}
			
			return true;
		}
		
		bool UpdateLevel() {

			if (currLevel != level)
			{
				currLevel = level;
				if (m_vis != nullptr) {

					meshes.clear();
					debugSubchunkMeshes.clear();

					if (allNeighboursAvaliable()) {
						debugBox = m_vis->DoCube(x + CHUNK_SIZE * CHUNK_LOD / 2, y + CHUNK_SIZE * CHUNK_LOD / 2, z + CHUNK_SIZE * CHUNK_LOD /2 , Ogre::Vector3(1.0f, 1.0f, 0.1f), 0.4f, Ogre::Vector3(CHUNK_SIZE * CHUNK_LOD / 2));
					}
					else {
						debugBox = m_vis->DoCube(x, y, z, Ogre::Vector3(0.7f + 0.3f * (1 / (level + 1)), 0.0f, 0.1f), 0.5f);
					}

					debugBox.marchingCubesItem->setVisible(false);

				}
				return true;
			}
			return false;

		}


	};



	class LandscapeObserversManager {

	public:

		struct SpherePoint {
			IntCords3 pos;
			int distance;

			SpherePoint(IntCords3 _pos, int _distance) : pos(_pos), distance(_distance) {}

			bool operator<(const SpherePoint& s2) const
			{
				return std::tie(pos.x, pos.y, pos.z, distance) < std::tie(s2.pos.x, s2.pos.y, s2.pos.z, s2.distance);
			}


			bool operator==(const SpherePoint& s2) const
			{
				return std::tie(pos.x, pos.y, pos.z, distance) == std::tie(s2.pos.x, s2.pos.y, s2.pos.z, s2.distance);
			}


		};

		struct Observer {
			IntCords3 Pos;
			int VisibilityDistance;

			Observer(IntCords3 pos, int visibilityDistance) : Pos(pos), VisibilityDistance(visibilityDistance) {
			}



			std::vector<SpherePoint> getSpherePointsFromCenter() {

				std::vector<SpherePoint> result;

				for (int x = -VisibilityDistance; x <= VisibilityDistance; x++) {
					for (int y = -VisibilityDistance; y <= VisibilityDistance; y++) {
						for (int z = -VisibilityDistance; z <= VisibilityDistance; z++) {
							auto cords = IntCords3(x, y, z);
							int distance = cords.square();
							if (distance <= VisibilityDistance) {
								result.push_back(SpherePoint(cords, distance));
							}

						}
					}
				}

				return result;

			}

			std::vector<SpherePoint> getSpherePoints() {

				std::vector<SpherePoint> result;
				int squaredViewDistance = VisibilityDistance * VisibilityDistance;

				for (int x = -VisibilityDistance; x <= VisibilityDistance; x++) {
					for (int y = -VisibilityDistance; y <= VisibilityDistance; y++) {
						for (int z = -VisibilityDistance; z <= VisibilityDistance; z++) {
							auto cords = IntCords3(x, y, z);
							int squaredPointDistance = cords.square();
							if (squaredPointDistance <= squaredViewDistance) {
								result.push_back(SpherePoint(cords.add(Pos), squaredPointDistance));
							}

						}
					}
				}

				return result;

			}


		};

	private:
		std::vector<Observer> m_observers;

	public:

		void addObserver(Observer observer) {
			m_observers.push_back(observer);
		}

		Observer getObserver(int index) {
			return m_observers[index];
		}

		std::vector<SpherePoint> getPointsVisibleByObservers() {

			std::vector<SpherePoint> result;

			for (auto observer : m_observers) {
				auto points = observer.getSpherePoints();
				result.insert(result.end(), points.begin(), points.end());
			}

			return result;
		}

	};


	/**
	determines which chunks must be loaded and during the frame
	*/
	class LandscapeVisibilityManager {

	private:

		int m_blockSparsity;
		int m_uniformLodLevel = -1;

		
		struct Block {

			LandscapeObserversManager::SpherePoint spherePoint;

			int dissapearanceTimer = 1;//If this goes below zero, this block is no longer visible and should be removed
			std::shared_ptr<InnerBlock> m_ptr;

			Block(LandscapeObserversManager::SpherePoint point) : spherePoint(point), m_ptr(std::make_shared<InnerBlock>(point.pos.x, point.pos.y, point.pos.z, point.distance)) {}

			void resetDistance(int newDistance) {
				spherePoint.distance = newDistance;
				m_ptr->level = newDistance;
				dissapearanceTimer = 1;

			}

			bool operator<(const Block& s2) const
			{
				return spherePoint < s2.spherePoint;
			}


			bool operator==(const Block& s2) const
			{
				return spherePoint == s2.spherePoint;
			}


		};


		struct Observer {
		public:

			int m_radius;
			int x, y, z;

			Observer(int radius, int _x, int _y, int _z) : m_radius(radius), x(_x), y(_y), z(_z) {}


		};
				
		std::vector<Block> FindVisibleBlocks() {

			std::vector<Block> newView;

			for (auto point : m_observersManager.getPointsVisibleByObservers()) {
				point.pos.smul(m_blockSparsity);
				newView.emplace_back(point);
			}

			std::sort(newView.begin(), newView.end());
			newView.erase(std::unique(newView.begin(), newView.end()), newView.end());

			return newView;

		}

		//Removes blocks that are ready for deleation, reduces visibility timer for all the other blocks
		void ClearCurrentBlocks() {

			for (auto iter = m_currBlocks.begin(); iter != m_currBlocks.end(); ) {

				if (iter->second.dissapearanceTimer > 0) {
					iter->second.dissapearanceTimer--;
					++iter;
				}
				else {
					iter = m_currBlocks.erase(iter);
				}
				
			}

		}

		void CommitNewBlocks(std::vector<Block> visBlocks) {

			std::vector<std::shared_ptr<InnerBlock>> preordered_chunks;

			for (auto& block : visBlocks) {

				auto iter = m_currBlocks.find(block.spherePoint.pos);

				if (iter == m_currBlocks.end()) {
					chunksToFill.push(block.m_ptr);
					m_currBlocks.insert(std::make_pair(block.spherePoint.pos, block));
				}
				else {

					iter->second.resetDistance(m_uniformLodLevel == -1 ? block.spherePoint.distance  : m_uniformLodLevel);
					preordered_chunks.push_back(iter->second.m_ptr);
				}

			}

			for (const auto& preordered_chunk : preordered_chunks) {

				for (int neghbour_id = 1; neghbour_id < 8; neghbour_id++) {
					if (preordered_chunk->m_neighbours[neghbour_id - 1].expired()) {

						auto CordsToFind = IntCords3(
							preordered_chunk->x + m_blockSparsity * ((neghbour_id >> 0) & 0x01),
							preordered_chunk->y + m_blockSparsity * ((neghbour_id >> 1) & 0x01),
							preordered_chunk->z + m_blockSparsity * ((neghbour_id >> 2) & 0x01));

						auto foundElem = m_currBlocks.find(CordsToFind);

						preordered_chunk->m_neighbours[neghbour_id - 1] = foundElem == m_currBlocks.end() ? nullptr : foundElem->second.m_ptr;
					}
				}

				chunksToRender.push(preordered_chunk);
			}

		}



	public:
		LandscapeObserversManager m_observersManager;

		std::map<IntCords3, Block> m_currBlocks;

		//Every \c frame newly visible chunks will be added here.
		std::queue<std::shared_ptr<InnerBlock>> chunksToFill;

		//Every \c frame chunks, that changed their distance from closest center will added here for re-rendering
		std::queue<std::shared_ptr<InnerBlock>> chunksToRender;


		LandscapeVisibilityManager(int blockSparsity = 4) : m_blockSparsity(blockSparsity) {}


		/**
		Determines which chunks must be loaded. Adds chunks, that where missing during last frame to ChunksToFill Queue
		*/
		void frame() {

			ClearCurrentBlocks();
			auto visBlocks = FindVisibleBlocks();
			CommitNewBlocks(visBlocks);

		}

		/**
		Controls lod level distribution amongst visible blocks
		if set to non-negative value, all blocks will heve the same provided LOD-level
		if negative, LOD-level will be based on block's distance from closest viewer
		*/
		void setUniformLodLevel(int uniformLodLevel) {
			m_uniformLodLevel = uniformLodLevel;
		}

	};


	class LandscapeTransvoxelImplementation {
			   
		ChunkData::ChunkNode fetchNodeData(std::array<ChunkData*, 8> chunks, int x, int y, int z, int lod) {

			x *= lod;
			y *= lod;
			z *= lod;


			auto chunkId = (x < CHUNK_SIZE * CHUNK_LOD ? 0 : 1) +
				(y < CHUNK_SIZE * CHUNK_LOD ? 0 : 2) +
				(z < CHUNK_SIZE * CHUNK_LOD ? 0 : 4);

			auto chunkToFetchFrom = chunks[chunkId];

			x %= CHUNK_SIZE * CHUNK_LOD;
			y %= CHUNK_SIZE * CHUNK_LOD;
			z %= CHUNK_SIZE * CHUNK_LOD;

			return chunkToFetchFrom->subchunks[x / CHUNK_SIZE][y / CHUNK_SIZE][z / CHUNK_SIZE].Nodes[x % CHUNK_SIZE][y % CHUNK_SIZE][z % CHUNK_SIZE];


		}

		using lockedChunksBlock = std::pair<std::array<ChunkData*, 8>, std::array<std::shared_ptr<InnerBlock>, 7>>;

		std::optional<lockedChunksBlock> lockChunkData(std::shared_ptr<InnerBlock> block) {
			std::array<ChunkData*, 8> chunks;
			chunks[0] = &(block->chunkData);

			std::array<std::shared_ptr<InnerBlock>, 7> lockedChunksPtrs;
			for (int i = 0; i < 7; i++) {
				lockedChunksPtrs[i] = block->m_neighbours[i].lock();

				if (!lockedChunksPtrs[i]) {
					return std::nullopt;
				}

				chunks[i + 1] = &(lockedChunksPtrs[i]->chunkData);
			}

			return std::make_pair(chunks, lockedChunksPtrs);
		}

		struct CellOwnedIndecies {
			int indexes[4];
		};


	public:

		struct Vertex {
			float x, y, z;

			Vertex(float _x, float _y, float _z) : x(_x), y(_y), z(_z) {}

		};

		int FindSubblockDistanceSquared(IntCords3 center, InnerBlock* block, IntCords3 subBlockPos, int lod) {

			auto blockCenter = block->pos() + subBlockPos * IntCords3(CHUNK_SIZE * lod) + IntCords3(CHUNK_SIZE * lod / 2);
			return (blockCenter - center).distanceSquared();

		}


		void RecursiveTriangualteChunkData(lockedChunksBlock& lockedChunks, std::shared_ptr<InnerBlock> block, IntCords3 lodCenter, IntCords3 subChunkPos = IntCords3(0), int lod = CHUNK_LOD) {


			int Distance = FindSubblockDistanceSquared(lodCenter, &(*block), subChunkPos, lod);
			int chunkRadius = (CHUNK_SIZE / 2) * (CHUNK_SIZE / 2) * (CHUNK_SIZE / 2);

			if (lod == 1 || Distance > chunkRadius * std::pow(2, lod)) {
				TriangulateSubchunk(lockedChunks, block, lod, subChunkPos.x, subChunkPos.y, subChunkPos.z);
			}
			else {

				for (int subBlockX = 0; subBlockX < 2; subBlockX++) {
					for (int subBlockY = 0; subBlockY < 2; subBlockY++) {
						for (int subBlockZ = 0; subBlockZ < 2; subBlockZ++) {
							auto newSubBlockPos = subChunkPos.mul(2) + IntCords3(subBlockX, subBlockY, subBlockZ);
							RecursiveTriangualteChunkData(lockedChunks, block, lodCenter, newSubBlockPos, lod / 2);

						}
					}
				}

			}


		}
		

		void TriangulateChunkData(std::shared_ptr<InnerBlock> block, IntCords3 center) {

			auto lockChunks = lockChunkData(block);

			if (!lockChunks) {
				return;
			}

			RecursiveTriangualteChunkData(lockChunks.value(), block, center);
			
		}
		
		float findDiffCoefficient(IntCords3 blockPos, int LodLevel, long FirstNodeVal, int firstIndex, long SecondNodeVal, int secondIndex, std::array<ChunkData*, 8>& chunks) {


			if (FirstNodeVal * SecondNodeVal > 0) {
				return 0;
			}

			bool isXActive = (firstIndex >> 0 & 0x01) != (secondIndex >> 0 & 0x01);
			bool isYActive = (firstIndex >> 1 & 0x01) != (secondIndex >> 1 & 0x01);
			bool isZActive = (firstIndex >> 2 & 0x01) != (secondIndex >> 2 & 0x01);


			int shift = 0;
			for (int currLod = LodLevel; currLod > 1; currLod /= 2) {

				/*(firstIndex >> 0 & 0x01) + (1.0f - floatShift) * (secondIndex >> 0 & 0x01)),
				(firstIndex >> 1 & 0x01) + (1.0f - floatShift) * (secondIndex >> 1 & 0x01)),
				(firstIndex >> 2 & 0x01) + (1.0f - floatShift) * (secondIndex >> 2 & 0x01))*/

				int currStep = currLod / 2;


				/*long middlePoint = fetchNodeData(chunks,
					blockPos.x + (firstIndex & 0x01) + (currLod - shift) * (firstIndex ^ secondIndex & 0x01),
					blockPos.y + (firstIndex & 0x02) + (currLod - shift) * (firstIndex ^ secondIndex & 0x02),
					blockPos.z + (firstIndex & 0x04) + (currLod - shift) * (firstIndex ^ secondIndex & 0x04),
					1).volume;*/

				int dbg = shift + currStep;

				long middlePoint = fetchNodeData(chunks,
					(blockPos.x + (firstIndex >> 0 & 0x01)) * LodLevel + isXActive * dbg,
					(blockPos.y + (firstIndex >> 1 & 0x01)) * LodLevel + isYActive * dbg,
					(blockPos.z + (firstIndex >> 2 & 0x01)) * LodLevel + isZActive * dbg,
					1).volume;



				if (FirstNodeVal * middlePoint > 0) {
					shift += currStep;
					FirstNodeVal = middlePoint;
				}
				else {
					SecondNodeVal = middlePoint;
				}

				

			}

			return (shift + ((SecondNodeVal) / (float)(SecondNodeVal - FirstNodeVal))) / LodLevel;

		}


		void TriangulateSubchunk(lockedChunksBlock& lockedChunks, std::shared_ptr<InnerBlock> block, int lod, int SubChunkX, int SubChunkY, int SubChunkZ) {

			auto chunks = lockedChunks.first;

			std::vector<Ogre::Vector3> generatedVertices;
			std::vector<unsigned int> generatedIndices;

			CellOwnedIndecies historyDecs[2][CHUNK_SIZE][CHUNK_SIZE];
			int lodLevel = lod; //Is set in powers of 2 starting with 1




			for (int z = 0; z < CHUNK_SIZE; z++) {
				for (int y = 0; y < CHUNK_SIZE; y++) {
					for (int x = 0; x < CHUNK_SIZE; x++) {

						ChunkData::ChunkNode corner[8];

						for (int i = 0; i < 8; i++) {
							corner[i] = fetchNodeData(chunks, (x + ((i >> 0) & 0x01)) + SubChunkX * CHUNK_SIZE, (y + ((i >> 1) & 0x01)) + SubChunkY * CHUNK_SIZE, (z + ((i >> 2) & 0x01)) + SubChunkZ * CHUNK_SIZE, lodLevel);
						}

						unsigned long caseCode = ((corner[0].volume >> 7) & 0x01)
							| ((corner[1].volume >> 6) & 0x02)
							| ((corner[2].volume >> 5) & 0x04)
							| ((corner[3].volume >> 4) & 0x08)
							| ((corner[4].volume >> 3) & 0x10)
							| ((corner[5].volume >> 2) & 0x20)
							| ((corner[6].volume >> 1) & 0x40)
							| (corner[7].volume & 0x80);


						if ((caseCode ^ ((corner[7].volume >> 7) & 0xFF)) != 0)
						{

							// Cell has a nontrivial triangulation.
							auto cellData = regularCellData[regularCellClass[caseCode]];
							char ValidityMask = (x > 0 ? 0x01 : 0) + (y > 0 ? 0x02 : 0) + (z > 0 ? 0x04 : 0);

							auto vertexCount = cellData.GetVertexCount();

							int usedIndecies[12];
							for (int i = 0; i < 12; i++) { usedIndecies[i] = -1; }


							for (int currTriangle = 0; currTriangle < cellData.GetTriangleCount(); currTriangle++) {

								for (int currIndexCount = 0; currIndexCount < 3; currIndexCount++) {

									auto currIndex = cellData.vertexIndex[currTriangle * 3 + currIndexCount];

									if (usedIndecies[currIndex] != -1) {
										generatedIndices.push_back(static_cast<unsigned int>(usedIndecies[currIndex]));
										continue;
									}


									auto edgeCode = regularVertexData[caseCode][currIndex];

									unsigned short firstVertexIndex = (edgeCode >> 4) & 0x0F;
									unsigned short secondVertexIndex = edgeCode & 0x0F;
									unsigned short cellIndexToBorrowFrom = (edgeCode >> 12) & 0x0F;
									unsigned short edgeIndexInDeck = (edgeCode >> 8) & 0x0F;

									bool VertexCanBeReused = (cellIndexToBorrowFrom & ValidityMask) == cellIndexToBorrowFrom;

									if (VertexCanBeReused) {
										usedIndecies[currIndex] = historyDecs[(z - (cellIndexToBorrowFrom >> 2 & 0x01)) % 2][x - (cellIndexToBorrowFrom >> 0 & 0x01)][y - (cellIndexToBorrowFrom >> 1 & 0x01)].indexes[edgeIndexInDeck];
										generatedIndices.push_back(usedIndecies[currIndex]);

									}
									else {
										long firstVertexValue = corner[firstVertexIndex].volume;
										long secondVertexValue = corner[secondVertexIndex].volume;


										long vertexShift = (secondVertexValue << 8) / (secondVertexValue - firstVertexValue);

										auto nextIndex = static_cast<unsigned short>(generatedVertices.size());
										char InterpolationEdge = firstVertexIndex ^ secondVertexIndex;


										usedIndecies[currIndex] = nextIndex;

										generatedIndices.emplace_back(usedIndecies[currIndex]);

										float floatShift = findDiffCoefficient({ SubChunkX * CHUNK_SIZE + x, SubChunkY * CHUNK_SIZE + y, SubChunkZ * CHUNK_SIZE + z }, lod, firstVertexValue, firstVertexIndex, secondVertexValue, secondVertexIndex, chunks);

										if (floatShift < 1.0f)
										{
											auto vec = Ogre::Vector3(
												lodLevel * (x + ((1.0f - floatShift) * (firstVertexIndex >> 0 & 0x01) + floatShift * (secondVertexIndex >> 0 & 0x01))),
												lodLevel * (y + ((1.0f - floatShift) * (firstVertexIndex >> 1 & 0x01) + floatShift * (secondVertexIndex >> 1 & 0x01))),
												lodLevel * (z + ((1.0f - floatShift) * (firstVertexIndex >> 2 & 0x01) + floatShift * (secondVertexIndex >> 2 & 0x01)))
											);


											generatedVertices.emplace_back(
												lodLevel * (x + ((1.0f - floatShift) * (firstVertexIndex >> 0 & 0x01) + floatShift * (secondVertexIndex >> 0 & 0x01))),
												lodLevel * (y + ((1.0f - floatShift) * (firstVertexIndex >> 1 & 0x01) + floatShift * (secondVertexIndex >> 1 & 0x01))),
												lodLevel * (z + ((1.0f - floatShift) * (firstVertexIndex >> 2 & 0x01) + floatShift * (secondVertexIndex >> 2 & 0x01)))
											);
										}
										else if (floatShift == 0) {
											generatedVertices.emplace_back(
												lodLevel * (x + (firstVertexIndex & 0x01)),
												lodLevel * (y + (firstVertexIndex >> 1 & 0x01)),
												lodLevel * (z + (firstVertexIndex >> 2 & 0x01)));
										}
										else {
											generatedVertices.emplace_back(
												lodLevel * (x + (secondVertexIndex & 0x01)),
												lodLevel * (y + ((secondVertexIndex >> 1) & 0x01)),
												lodLevel * (z + ((secondVertexIndex >> 2) & 0x01)));
										}


										if (cellIndexToBorrowFrom == 0x08) {

											historyDecs[z % 2][x][y].indexes[edgeIndexInDeck] = usedIndecies[currIndex];

										}

									}

								}

							}

						}

					}

				}
			}


			block->meshes.emplace_back(block->m_vis->GenerateMeshFromVertices(generatedVertices, generatedIndices, Ogre::Vector3(
				block->x + SubChunkX * CHUNK_SIZE * lodLevel,
				block->y + SubChunkY * CHUNK_SIZE * lodLevel,
				block->z + SubChunkZ * CHUNK_SIZE * lodLevel
			), CHUNK_SIZE * lodLevel));

			block->debugSubchunkMeshes.emplace_back(block->m_vis->DoCube(
				block->x + SubChunkX * CHUNK_SIZE * lodLevel + CHUNK_SIZE * lodLevel / 2,
				block->y + SubChunkY * CHUNK_SIZE * lodLevel + CHUNK_SIZE * lodLevel / 2,
				block->z + SubChunkZ * CHUNK_SIZE * lodLevel + CHUNK_SIZE * lodLevel / 2,
				Ogre::Vector3(0.5f, 1.0f, lodLevel * 0.2f), 0.4f, Ogre::Vector3(CHUNK_SIZE* lodLevel / 2)));

			block->debugSubchunkMeshes.back().marchingCubesItem->setVisible(false);



		}


	};


	double Noise2(int x, int y) {
		int n = x + y * 57;
		n = (n << 13) ^ n;

		return (1.0 - (double)((n * (n * n * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824.0);

	};

	class LandscapeChunkLoader {

		siv::PerlinNoise perlin;

		void generateChunk(ChunkData* unfilledBlock) {

			for (int subchunkX = 0; subchunkX < CHUNK_LOD; subchunkX++) {
				for (int subchunkY = 0; subchunkY < CHUNK_LOD; subchunkY++) {
					for (int subchunkZ = 0; subchunkZ < CHUNK_LOD; subchunkZ++) {
						
						auto& subchunkNodes = unfilledBlock->getSubchunk(subchunkX, subchunkY, subchunkZ);
						
						for (int x = 0; x < CHUNK_SIZE; x++) {
							for (int y = 0; y < CHUNK_SIZE; y++) {
								for (int z = 0; z < CHUNK_SIZE; z++) {

									auto realX = unfilledBlock->x + subchunkX * CHUNK_SIZE + x;
									auto realY = unfilledBlock->y + subchunkY * CHUNK_SIZE + y;
									auto realZ = unfilledBlock->z + subchunkZ * CHUNK_SIZE + z;

									subchunkNodes.Nodes[x][y][z].volume = getWordIndexValue(realX, realY, realZ);
									
									
								}
							}
						}

					}
				}
			}
			



		}

		char getWordIndexValue(int worldX, int WorldY, int WorldZ) {

			return 12 < WorldY ? 127 : -127;

			//auto noise = perlin.normalizedOctaveNoise3D(worldX / 70.0f, WorldY / 70.0f, WorldZ / 70.0f, 5);

			//return 10 + noise * 8 < WorldY ? 127 : -127;

		}


	public:

		LandscapeChunkLoader() : perlin(32) {
		}


		void InitiateChunk(std::shared_ptr<InnerBlock> block) {

			generateChunk(&(block->chunkData));

		}





	};

	


	class innerLandscape3Teseter : GEM::SDL_KeyboardListener {

	private:

		bool m_showChunksBoxes = false;
		int UniformLodLevel = 1;
			


	public:
		GEM::Ogre_Service* m_OgreService;
		GEM::SDL_Controller* m_SDLController;
		GEM::LandscapeVisualization m_LandscapeVisualization;
		
		LandscapeVisibilityManager m_blockVisibilityManager;
		LandscapeTransvoxelImplementation LTI;

		LandscapeChunkLoader landscapeChunkLoader;


		innerLandscape3Teseter() : m_blockVisibilityManager(CHUNK_SIZE * CHUNK_LOD) {}

		void initializeInputAndOgre() {

			m_SDLController->registerKeyboardListener(this);


			auto SceneMgr = Ogre::Root::getSingleton().getSceneManager("ExampleSMInstance");
			SceneMgr->setAmbientLight(Ogre::ColourValue(0.8, 0.8, 0.8, 1), Ogre::ColourValue(0.8, 0.8, 0.8, 1), Ogre::Vector3(0, 1, 0));

			m_OgreService->AllowCameraMovement(true);
			
		}



		//   SDL_KeyboardListener
		virtual void textInput(const SDL_TextInputEvent& arg) override {}
		virtual void keyReleased(const SDL_KeyboardEvent& arg) override {}

		virtual void keyPressed(const SDL_KeyboardEvent& arg) override {

			if (arg.keysym.sym == SDLK_1) {

				m_showChunksBoxes = !m_showChunksBoxes;

				for (const auto& block : m_blockVisibilityManager.m_currBlocks) {
					block.second.m_ptr->debugBox.marchingCubesItem->setVisible(m_showChunksBoxes);

					for (const auto& debugBox : block.second.m_ptr->debugSubchunkMeshes) {
						debugBox.marchingCubesItem->setVisible(m_showChunksBoxes);

					}
				}
			}

			if (arg.keysym.sym == SDLK_EQUALS) {

				if (UniformLodLevel * 2 > CHUNK_LOD || UniformLodLevel < 1) {
					UniformLodLevel = 1;
				}
				else {
					UniformLodLevel *= 2;
				}
				m_blockVisibilityManager.setUniformLodLevel(UniformLodLevel);
			}

			if (arg.keysym.sym == SDLK_MINUS) {

				if (UniformLodLevel = 1) {
					UniformLodLevel = -1;
				}
				else {
					UniformLodLevel /= 2;
				}
				m_blockVisibilityManager.setUniformLodLevel(UniformLodLevel);
			}



		}

	};


	Landscape3Test::Landscape3Test(GEM::Ogre_Service* OgreService, GEM::SDL_Controller* sdlController)
		: m_OgreService(OgreService){

		m_tester = new innerLandscape3Teseter;
		m_tester->m_OgreService = m_OgreService;
		m_tester->m_SDLController = sdlController;
			   

	}

	GEM::Service::ActionResult Landscape3Test::initialize()
	{
		m_tester->initializeInputAndOgre();
		m_tester->m_blockVisibilityManager.m_observersManager.addObserver(LandscapeObserversManager::Observer({ 0, 0, 0 }, 3));

		return ActionResult::AR_OK;
	}


	GEM::Service::ActionResult Landscape3Test::preFrame(float timeDelta)
	{

		auto camera = m_OgreService->getCamera();

		auto currPos = camera->getDerivedPosition();


		m_tester->m_blockVisibilityManager.frame();



		while (!m_tester->m_blockVisibilityManager.chunksToFill.empty()) {
			auto blockTOFill = m_tester->m_blockVisibilityManager.chunksToFill.front();
			m_tester->m_blockVisibilityManager.chunksToFill.pop();
			blockTOFill->m_vis = &(m_tester->m_LandscapeVisualization);
			m_tester->landscapeChunkLoader.InitiateChunk(blockTOFill);
		}

		int chunksRerenderLimit = 4;

		while (!m_tester->m_blockVisibilityManager.chunksToRender.empty()) {
			auto blockToUpdate = m_tester->m_blockVisibilityManager.chunksToRender.front();
			m_tester->m_blockVisibilityManager.chunksToRender.pop();

			if (chunksRerenderLimit > 0) {
				if (blockToUpdate->UpdateLevel()) {
					chunksRerenderLimit--;
					if (blockToUpdate->allNeighboursAvaliable()) {
						m_tester->LTI.TriangulateChunkData(blockToUpdate, IntCords3(0, 0, 0));
					}
				}
			}
		}

		int objectsCnt = 0;
		for (const auto& block : m_tester->m_blockVisibilityManager.m_currBlocks) {
			objectsCnt += block.second.m_ptr->meshes.size();
		}





		return ActionResult::AR_OK;
	}

}